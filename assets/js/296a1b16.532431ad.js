"use strict";(self.webpackChunkhysteria_orm_docs=self.webpackChunkhysteria_orm_docs||[]).push([[7919],{343:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"databases/sql/models/case-conventions","title":"Case Conventions","description":"Hysteria ORM handles case conversion between your TypeScript model properties and database column names. This document explains how case conventions work and what to expect when querying with aliases.","source":"@site/docs/databases/sql/models/case-conventions.md","sourceDirName":"databases/sql/models","slug":"/databases/sql/models/case-conventions","permalink":"/hysteria-orm/databases/sql/models/case-conventions","draft":false,"unlisted":false,"editUrl":"https://github.com/Frasan00/hysteria-orm/tree/main/website/docs/databases/sql/models/case-conventions.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"Case Conventions","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Database Views","permalink":"/hysteria-orm/databases/sql/models/views"},"next":{"title":"Standard Model Methods","permalink":"/hysteria-orm/databases/sql/standard-methods/basics"}}');var i=n(4848),t=n(8453);const l={title:"Case Conventions",sidebar_position:6},r="Case Conventions",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Key Principle",id:"key-principle",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"1. Model Column Mapping",id:"1-model-column-mapping",level:3},{value:"2. Custom Aliases (Preserved As-Is)",id:"2-custom-aliases-preserved-as-is",level:3},{value:"3. Qualified Columns",id:"3-qualified-columns",level:3},{value:"Examples",id:"examples",level:2},{value:"Model Columns with Case Conversion",id:"model-columns-with-case-conversion",level:3},{value:"Mixed: Model Columns + Aliases",id:"mixed-model-columns--aliases",level:3},{value:"Aggregate Functions",id:"aggregate-functions",level:3},{value:"JOINs with Aliases",id:"joins-with-aliases",level:3},{value:"Why This Design?",id:"why-this-design",level:2},{value:"1. <strong>Explicit is Better Than Implicit</strong>",id:"1-explicit-is-better-than-implicit",level:3},{value:"2. <strong>Flexibility for Different Naming Styles</strong>",id:"2-flexibility-for-different-naming-styles",level:3},{value:"3. <strong>API Response Control</strong>",id:"3-api-response-control",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"DO: Use Descriptive Aliases",id:"do-use-descriptive-aliases",level:3},{value:"DON&#39;T: Rely on Implicit Case Conversion",id:"dont-rely-on-implicit-case-conversion",level:3},{value:"DO: Match Database Names for Model Columns",id:"do-match-database-names-for-model-columns",level:3},{value:"Migration Guide",id:"migration-guide",level:2},{value:"Related Static Properties",id:"related-static-properties",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"case-conventions",children:"Case Conventions"})}),"\n",(0,i.jsx)(s.p,{children:"Hysteria ORM handles case conversion between your TypeScript model properties and database column names. This document explains how case conventions work and what to expect when querying with aliases."}),"\n",(0,i.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(s.p,{children:"When you define a model with decorators, the ORM automatically maps between:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Model property names"})," (TypeScript) - e.g., ",(0,i.jsx)(s.code,{children:"firstName"}),", ",(0,i.jsx)(s.code,{children:"createdAt"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Database column names"})," (SQL) - e.g., ",(0,i.jsx)(s.code,{children:"first_name"}),", ",(0,i.jsx)(s.code,{children:"created_at"})]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"key-principle",children:"Key Principle"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsxs)(s.strong,{children:["Only model columns defined with ",(0,i.jsx)(s.code,{children:"@column()"})," decorators are affected by case conventions."]})}),"\n",(0,i.jsxs)(s.p,{children:["Custom aliases from ",(0,i.jsx)(s.code,{children:"select()"}),", ",(0,i.jsx)(s.code,{children:"selectRaw()"}),", and aggregate functions are ",(0,i.jsx)(s.strong,{children:"preserved exactly as you specify them"}),"."]}),"\n",(0,i.jsx)(s.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,i.jsx)(s.h3,{id:"1-model-column-mapping",children:"1. Model Column Mapping"}),"\n",(0,i.jsx)(s.p,{children:"When you define a model column, the decorator stores both the property name and the database name:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'class User extends Model {\n  @column()\n  declare firstName: string;  // columnName: "firstName", databaseName: "first_name"\n}\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"columnName"}),": The TypeScript property name (",(0,i.jsx)(s.code,{children:"firstName"}),")"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"databaseName"}),": Converted using ",(0,i.jsx)(s.code,{children:"databaseCaseConvention"})," (",(0,i.jsx)(s.code,{children:"first_name"})," for snake_case)"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"When data is retrieved from the database:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["The ORM looks up ",(0,i.jsx)(s.code,{children:"databaseName"})," in the result"]}),"\n",(0,i.jsxs)(s.li,{children:["If found, it maps to the model's ",(0,i.jsx)(s.code,{children:"columnName"})]}),"\n",(0,i.jsx)(s.li,{children:"If not found (non-model column), the key is preserved as-is"}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"2-custom-aliases-preserved-as-is",children:"2. Custom Aliases (Preserved As-Is)"}),"\n",(0,i.jsxs)(s.p,{children:["When you use aliases in queries, they are ",(0,i.jsx)(s.strong,{children:"not"})," case-converted:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'// The alias "TotalUsers" is preserved exactly\nconst result = await User.query()\n  .selectRaw("count(*) as TotalUsers")\n  .one();\n\nconsole.log(result.TotalUsers);  // \u2705 Works\nconsole.log(result.totalUsers);  // \u274c Undefined - case was not converted\n'})}),"\n",(0,i.jsx)(s.h3,{id:"3-qualified-columns",children:"3. Qualified Columns"}),"\n",(0,i.jsx)(s.p,{children:"When selecting columns with table prefixes, only the column name matters:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'// "users.first_name" -> maps to model\'s firstName property\nconst user = await User.query()\n  .select("users.first_name", "users.email_address")\n  .one();\n\nconsole.log(user.firstName);     // \u2705 Mapped from users.first_name\nconsole.log(user.emailAddress);  // \u2705 Mapped from users.email_address\n'})}),"\n",(0,i.jsx)(s.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(s.h3,{id:"model-columns-with-case-conversion",children:"Model Columns with Case Conversion"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'class User extends Model {\n  @column()\n  declare firstName: string;  // databaseName: "first_name"\n\n  @column()\n  declare emailAddress: string;  // databaseName: "email_address"\n}\n\n// Query using database column names\nconst user = await User.query()\n  .select("first_name", "email_address")\n  .one();\n\nconsole.log(user.firstName);     // \u2705 Works - mapped from "first_name"\nconsole.log(user.emailAddress);  // \u2705 Works - mapped from "email_address"\n'})}),"\n",(0,i.jsx)(s.h3,{id:"mixed-model-columns--aliases",children:"Mixed: Model Columns + Aliases"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'// Model columns are mapped, aliases are preserved\nconst result = await User.query()\n  .select(\n    "first_name",              // Model column -> user.firstName\n    "count(*) as UserCount",   // Alias -> result.UserCount (preserved)\n    "max(age) as MaxAge"       // Alias -> result.MaxAge (preserved)\n  )\n  .one();\n\nconsole.log(result.firstName);   // \u2705 Model column (mapped)\nconsole.log(result.UserCount);   // \u2705 Alias (preserved as-is)\nconsole.log(result.MaxAge);      // \u2705 Alias (preserved as-is)\n'})}),"\n",(0,i.jsx)(s.h3,{id:"aggregate-functions",children:"Aggregate Functions"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:"const stats = await User.query()\n  .selectRaw(`\n    count(*) as TotalUsers,\n    avg(age) as AverageAge,\n    max(created_at) as LatestSignup\n  `)\n  .one();\n\nconsole.log(stats.TotalUsers);     // \u2705 Preserved\nconsole.log(stats.AverageAge);     // \u2705 Preserved\nconsole.log(stats.LatestSignup);   // \u2705 Preserved\n"})}),"\n",(0,i.jsx)(s.h3,{id:"joins-with-aliases",children:"JOINs with Aliases"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'const posts = await Post.query()\n  .select(\n    "posts.*",\n    "users.name as AuthorName",   // Preserved as AuthorName\n    "users.email as AuthorEmail"   // Preserved as AuthorEmail\n  )\n  .leftJoin("users", "users.id", "posts.user_id")\n  .many();\n\nconsole.log(posts[0].AuthorName);   // \u2705 Alias preserved\nconsole.log(posts[0].AuthorEmail);  // \u2705 Alias preserved\n'})}),"\n",(0,i.jsx)(s.h2,{id:"why-this-design",children:"Why This Design?"}),"\n",(0,i.jsxs)(s.h3,{id:"1-explicit-is-better-than-implicit",children:["1. ",(0,i.jsx)(s.strong,{children:"Explicit is Better Than Implicit"})]}),"\n",(0,i.jsxs)(s.p,{children:["When you write an alias like ",(0,i.jsx)(s.code,{children:"as TotalUsers"}),", you expect it to be ",(0,i.jsx)(s.code,{children:"TotalUsers"}),", not ",(0,i.jsx)(s.code,{children:"totalUsers"}),". The ORM respects your intent."]}),"\n",(0,i.jsxs)(s.h3,{id:"2-flexibility-for-different-naming-styles",children:["2. ",(0,i.jsx)(s.strong,{children:"Flexibility for Different Naming Styles"})]}),"\n",(0,i.jsx)(s.p,{children:"You can use any casing for aliases without worrying about convention conflicts:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'// All of these work as written:\n.select("count(*) as total")     // result.total\n.select("count(*) as Total")     // result.Total\n.select("count(*) as TOTAL")     // result.TOTAL\n'})}),"\n",(0,i.jsxs)(s.h3,{id:"3-api-response-control",children:["3. ",(0,i.jsx)(s.strong,{children:"API Response Control"})]}),"\n",(0,i.jsx)(s.p,{children:"When building APIs, you control the exact shape of responses:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'// API clients receive exactly what you specify\nconst user = await User.query()\n  .select("id", "name as display_name")\n  .one();\n\n// Response: { id: 1, display_name: "John" }\n// NOT: { id: 1, displayName: "John" }\n'})}),"\n",(0,i.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(s.h3,{id:"do-use-descriptive-aliases",children:"DO: Use Descriptive Aliases"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'// \u2705 Clear and intentional\n.select("count(*) as ActiveUserCount")\n.select("price * quantity as TotalPrice")\n\n// \u2705 API-friendly naming\n.select("name as display_name")\n.select("created_at as signupDate")\n'})}),"\n",(0,i.jsx)(s.h3,{id:"dont-rely-on-implicit-case-conversion",children:"DON'T: Rely on Implicit Case Conversion"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'// \u274c Avoid - relies on convention\n.select("count(*) as usercount")  // Hoping for userCount\n\n// \u2705 Better - be explicit\n.select("count(*) as userCount")  // Gets userCount\n'})}),"\n",(0,i.jsx)(s.h3,{id:"do-match-database-names-for-model-columns",children:"DO: Match Database Names for Model Columns"}),"\n",(0,i.jsx)(s.p,{children:"When selecting model columns, use the actual database column name:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'class User extends Model {\n  @column()\n  declare firstName: string;  // databaseName: "first_name"\n}\n\n// \u2705 Use database name\nUser.query().select("first_name")\n\n// \u274c Don\'t use model property name\nUser.query().select("firstName")  // Won\'t match\n'})}),"\n",(0,i.jsx)(s.h2,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,i.jsx)(s.p,{children:"If you were relying on implicit case conversion for aliases, update your queries:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'// Before (relied on implicit conversion)\n.select("count(*) as totalusers")  // Became result.totalUsers\n\n// After (use desired casing explicitly)\n.select("count(*) as totalUsers")  // Becomes result.totalUsers\n'})}),"\n",(0,i.jsx)(s.h2,{id:"related-static-properties",children:"Related Static Properties"}),"\n",(0,i.jsxs)(s.p,{children:["While ",(0,i.jsx)(s.code,{children:"databaseCaseConvention"})," still exists for query building (Model \u2192 Database direction), it does ",(0,i.jsx)(s.strong,{children:"not"})," affect serialization (Database \u2192 Model direction) for aliases."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Query Building"})," (Model \u2192 Database): ",(0,i.jsx)(s.code,{children:"databaseCaseConvention"})," converts property names to SQL column names"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Serialization"})," (Database \u2192 Model): Only model columns use stored ",(0,i.jsx)(s.code,{children:"databaseName"}),"; aliases are preserved as-is"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.p,{children:["Next: ",(0,i.jsx)(s.a,{href:"/hysteria-orm/databases/sql/models/instance-methods",children:"Instance Methods"})]})]})}function u(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>r});var a=n(6540);const i={},t=a.createContext(i);function l(e){const s=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(t.Provider,{value:s},e.children)}}}]);