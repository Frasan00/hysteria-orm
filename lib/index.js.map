{"version":3,"sources":["../src/index.ts","../src/CaseUtils.ts","../src/Sql/Models/Model.ts","../src/Sql/Models/Relations/Relation.ts","../src/Sql/Models/Relations/HasOne.ts","../src/Sql/Models/Relations/HasMany.ts","../src/Sql/Models/Relations/BelongsTo.ts","../src/Datasource.ts","../src/Sql/SqlDatasource.ts","../src/Sql/Templates/Query/SELECT.ts","../src/Sql/Templates/Query/INSERT.ts","../src/Sql/Templates/Query/UPDATE.ts","../src/Sql/Templates/Query/DELETE.ts","../src/Logger.ts","../src/Sql/Templates/Query/RELATIONS.ts","../src/Sql/Templates/Query/WHERE.TS.ts","../src/Sql/Mysql/MySqlModelManagerUtils.ts","../src/Sql/QueryBuilder/QueryBuilder.ts","../src/Sql/Mysql/MysqlQueryBuilder.ts","../src/Sql/Templates/Query/TRANSACTION.ts","../src/Sql/Mysql/MysqlTransaction.ts","../src/Sql/Models/ModelManager/AbstractModelManager.ts","../src/Sql/Mysql/MysqlModelManager.ts","../src/Sql/Postgres/PostgresModelManagerUtils.ts","../src/Sql/Postgres/PostgresTransaction.ts","../src/Sql/Postgres/PostgresQueryBuilder.ts","../src/Sql/Postgres/PostgresModelManager.ts","../src/Sql/Migrations/Columns/Column.ts","../src/Sql/Migrations/Columns/DropColumn.ts","../src/Sql/Migrations/Columns/ColumnBuilders/ColumnConfigBuilder.ts","../src/Sql/Migrations/Columns/ColumnBuilders/ColumnTypeBuilder.ts","../src/Sql/Migrations/Table.ts","../src/Sql/Migrations/Migration.ts"],"sourcesContent":["import { Model } from \"./Sql/Models/Model\";\nimport { HasOne } from \"./Sql/Models/Relations/HasOne\";\nimport { HasMany } from \"./Sql/Models/Relations/HasMany\";\nimport { BelongsTo } from \"./Sql/Models/Relations/BelongsTo\";\nimport { SqlDatasource } from \"./Sql/SqlDatasource\";\nimport { DatasourceInput } from \"./Datasource\";\nimport { Migration } from \"./Sql/Migrations/Migration\";\n\nexport {\n  Model,\n  HasOne,\n  HasMany,\n  BelongsTo,\n  SqlDatasource,\n  DatasourceInput,\n  Migration,\n};\n","import { Model } from \"./Sql/Models/Model\";\nimport { Relation } from \"./Sql/Models/Relations/Relation\";\n\nexport function camelToSnakeCase(camelCase: any) {\n  if (typeof camelCase !== \"string\" || !camelCase) {\n    return camelCase;\n  }\n\n  return camelCase.replace(/([a-z0-9])([A-Z])/g, \"$1_$2\").toLowerCase();\n}\n\nfunction fromSnakeToCamelCase(snake: any) {\n  if (typeof snake !== \"string\" || !snake) {\n    return snake;\n  }\n\n  return snake.replace(/(_\\w)/g, (x) => x[1].toUpperCase());\n}\n\nexport function modelFromSnakeCaseToCamel<T extends Record<string, any>>(model?: T): T | null {\n  if (!model) {\n    return null;\n  }\n\n  const camelCaseModel: Record<string, any> = {};\n\n  if ('metadata' in model) {\n    camelCaseModel.metadata = model.metadata;\n  }\n  if ('aliasColumns' in model) {\n    camelCaseModel.aliasColumns = model.aliasColumns;\n  }\n  if ('setProps' in model) {\n    camelCaseModel.setProps = model.setProps;\n  }\n\n  Object.keys(model).forEach((key) => {\n    if (key === 'metadata' || key === 'aliasColumns' || key === 'setProps') {\n      return;\n    }\n\n    const originalValue = model[key];\n    const camelCaseKey = fromSnakeToCamelCase(key);\n\n    if (originalValue && typeof originalValue === 'object' && !Array.isArray(originalValue) && !(originalValue instanceof Date)) {\n      camelCaseModel[camelCaseKey] = modelFromSnakeCaseToCamel(originalValue);\n    } else {\n      camelCaseModel[camelCaseKey] = originalValue;\n    }\n  });\n\n  return camelCaseModel as T;\n}\n","/*\n * Represents a model in the Database\n */\nimport { camelToSnakeCase } from \"../../CaseUtils\";\n\nexport interface Metadata {\n  readonly tableName: string;\n  readonly primaryKey?: string;\n}\n\nexport abstract class Model {\n  public metadata: Metadata;\n  public aliasColumns: { [key: string]: string | number | boolean } = {};\n\n  protected constructor(tableName?: string, primaryKey?: string) {\n    this.metadata = {\n      tableName: tableName || camelToSnakeCase(this.constructor.name) + \"s\",\n      primaryKey: primaryKey,\n    };\n  }\n\n  public setProps<T extends this>(data: Partial<T>): void {\n    for (const key in data) {\n      Object.assign(this, { [key]: data[key] });\n    }\n  }\n}\n","import { Model } from \"../Model\";\n\nexport enum RelationType {\n  hasOne = \"hasOne\", // One to One without foreign key\n  belongsTo = \"belongsTo\", // One to One with foreign key\n  hasMany = \"hasMany\",\n}\n\n/**\n * Main Model -> Related Model\n */\n\nexport abstract class Relation {\n  public abstract type: RelationType;\n  public foreignKey?: string;\n  public relatedModel: string;\n\n  protected constructor(relatedModel: string) {\n    this.relatedModel = relatedModel;\n  }\n}\n","import { Relation, RelationType } from \"./Relation\";\nimport { Model } from \"../Model\";\n\nexport class HasOne extends Relation {\n  public type: RelationType;\n  public foreignKey: string;\n\n  public constructor(relatedModel: string, foreignKey: string) {\n    super(relatedModel);\n    this.foreignKey = foreignKey;\n    this.type = RelationType.hasOne;\n  }\n}\n","import { Relation, RelationType } from \"./Relation\";\nimport { Model } from \"../Model\";\n\nexport class HasMany extends Relation {\n  public type: RelationType = RelationType.hasMany;\n  public foreignKey: string;\n\n  public constructor(relatedModel: string, foreignKey: string) {\n    super(relatedModel);\n    this.foreignKey = foreignKey;\n    this.type = RelationType.hasMany;\n  }\n}\n","import { Relation, RelationType } from \"./Relation\";\nimport { Model } from \"../Model\";\n\nexport class BelongsTo extends Relation {\n  public type: RelationType;\n  public foreignKey: string;\n\n  public constructor(relatedModel: string, foreignKey: string) {\n    super(relatedModel);\n    this.foreignKey = foreignKey;\n    this.type = RelationType.belongsTo;\n  }\n}\n","import { Model } from \"./Sql/Models/Model\";\nimport { AbstractModelManager } from \"./Sql/Models/ModelManager/AbstractModelManager\";\n\n/*\n * Creates a datasource for the selected database type with the provided credentials\n */\nexport type DatasourceType = \"mysql\" | \"postgres\";\n\nexport interface DatasourceInput {\n  readonly type: DatasourceType;\n  readonly host: string;\n  readonly port: number;\n  readonly username: string;\n  readonly password: string;\n  readonly database: string;\n  readonly logs?: boolean;\n}\n\nexport abstract class Datasource {\n  protected type: DatasourceType;\n  protected host: string;\n  protected port: number;\n  protected username: string;\n  protected password: string;\n  protected database: string;\n  protected logs: boolean;\n\n  protected constructor(input: DatasourceInput) {\n    this.type = input.type;\n    this.host = input.host;\n    this.port = input.port;\n    this.username = input.username;\n    this.password = input.password;\n    this.database = input.database;\n    this.logs = input.logs || false;\n  }\n\n  public abstract connect(): Promise<void>;\n  public abstract getModelManager(\n    model: typeof Model,\n  ): AbstractModelManager<Model>;\n}\n","import { Datasource, DatasourceInput, DatasourceType } from \"../Datasource\";\nimport mysql, { createPool, Pool } from \"mysql2/promise\";\nimport pg from \"pg\";\nimport { Model } from \"./Models/Model\";\nimport { MysqlModelManager } from \"./Mysql/MysqlModelManager\";\nimport { PostgresModelManager } from \"./Postgres/PostgresModelManager\";\n\ntype ModelManager<T extends Model> =\n  | MysqlModelManager<T>\n  | PostgresModelManager<T>;\n\nexport type SqlPoolType = mysql.Pool | pg.Pool;\nexport type SqlPoolConnectionType = mysql.PoolConnection | pg.PoolClient;\n\nexport class SqlDatasource extends Datasource {\n  protected sqlPool!: SqlPoolType;\n\n  public constructor(input: DatasourceInput) {\n    super(input);\n  }\n\n  /**\n   * @description Connects to the database establishing a connection pool.\n   */\n  public async connect(): Promise<void> {\n    switch (this.type) {\n      case \"mysql\":\n        this.sqlPool = createPool({\n          host: this.host,\n          port: this.port,\n          user: this.username,\n          password: this.password,\n          database: this.database,\n        });\n        break;\n\n      case \"postgres\":\n        this.sqlPool = new pg.Pool({\n          host: this.host,\n          port: this.port,\n          user: this.username,\n          password: this.password,\n          database: this.database,\n        });\n        break;\n      default:\n        throw new Error(`Unsupported datasource type: ${this.type}`);\n    }\n  }\n\n  /**\n   * @description Returns model manager for the provided model\n   * @param model\n   */\n  public getModelManager<T extends Model>(model: new () => T): ModelManager<T> {\n    switch (this.type) {\n      case \"mysql\":\n        return new MysqlModelManager<T>(\n          model,\n          this.sqlPool as mysql.Pool,\n          this.logs,\n        );\n      case \"postgres\":\n        return new PostgresModelManager<T>(\n          model,\n          this.sqlPool as pg.Pool,\n          this.logs,\n        );\n      default:\n        throw new Error(`Unsupported datasource type: ${this.type}`);\n    }\n  }\n\n  /**\n   * @description Returns raw mysql pool\n   */\n  public async getRawPool(): Promise<SqlPoolType> {\n    switch (this.type) {\n      case \"mysql\":\n        return createPool({\n          host: this.host,\n          port: this.port,\n          user: this.username,\n          password: this.password,\n          database: this.database,\n        });\n      case \"postgres\":\n        return new pg.Pool({\n          host: this.host,\n          port: this.port,\n          user: this.username,\n          password: this.password,\n          database: this.database,\n        });\n      default:\n        throw new Error(`Unsupported datasource type: ${this.type}`);\n    }\n  }\n\n  /**\n   * @description Returns raw mysql PoolConnection\n   */\n  public async getRawPoolConnection(): Promise<SqlPoolConnectionType> {\n    switch (this.type) {\n      case \"mysql\":\n        return createPool({\n          host: this.host,\n          port: this.port,\n          user: this.username,\n          password: this.password,\n          database: this.database,\n        }).getConnection();\n      case \"postgres\":\n        return new pg.Pool({\n          host: this.host,\n          port: this.port,\n          user: this.username,\n          password: this.password,\n          database: this.database,\n        }).connect();\n      default:\n        throw new Error(`Unsupported datasource type: ${this.type}`);\n    }\n  }\n}\n","import { camelToSnakeCase } from \"../../../CaseUtils\";\n\nconst selectTemplate = (table: string) => {\n  return {\n    selectAll: `SELECT * FROM ${table} `,\n    selectById: (id: string) => `SELECT * FROM ${table} WHERE id = ${id} `,\n    selectColumns: (...columns: string[]) => {\n      columns = columns.map((column) => {\n        if (column === \"*\" || column.includes(\"as\") || column.includes(\"AS\")) {\n          return column;\n        }\n\n        return camelToSnakeCase(column);\n      });\n      return `SELECT ${columns.join(\", \")} FROM ${table} `;\n    },\n    selectCount: `SELECT COUNT(*) FROM ${table} `,\n    selectDistinct: (...columns: string[]) => {\n      columns = columns.map((column) => camelToSnakeCase(column));\n      return `SELECT DISTINCT ${columns.join(\", \")} FROM ${table} `;\n    },\n    selectSum: (column: string) =>\n      `SELECT SUM(${camelToSnakeCase(column)}) FROM ${table} `,\n    orderBy: (column: string[], order?: \"ASC\" | \"DESC\") => {\n      column = column.map((column) => camelToSnakeCase(column));\n      return `\\nORDER BY ${column.join(\", \")} ${order}`;\n    },\n    groupBy: (...columns: string[]) => {\n      columns = columns.map((column) => camelToSnakeCase(column));\n      return `\\nGROUP BY ${columns.join(\", \")} `;\n    },\n    limit: (limit: number) => `\\nLIMIT ${limit} `,\n    offset: (offset: number) => `\\nOFFSET ${offset} `,\n  };\n};\n\nexport type SelectTemplateType = {\n  selectAll: string;\n  selectById: (id: string) => string;\n  selectColumns: (...columns: string[]) => string;\n  selectCount: string;\n  selectDistinct: (...columns: string[]) => string;\n  selectSum: (column: string) => string;\n  orderBy: (column: string[], order?: \"ASC\" | \"DESC\") => string;\n  groupBy: (...columns: string[]) => string;\n  limit: (limit: number) => string;\n  offset: (offset: number) => string;\n};\n\nexport default selectTemplate;\n","import { camelToSnakeCase } from \"../../../CaseUtils\";\n\ntype BaseValues = string | number | boolean | Date | null | undefined;\n\nconst insertTemplate = (tableName: string) => {\n  return {\n    insert: (columns: string[], values: BaseValues[]) => {\n      columns = columns.map((column) => camelToSnakeCase(column));\n      values = parseValues(values);\n      return `INSERT INTO ${tableName} (${columns.join(\", \")})\n       VALUES (${values.join(\", \")});`;\n    },\n    insertMany: (columns: string[], values: string[][]) => {\n      columns = columns.map((column) => camelToSnakeCase(column));\n      const parsedValues = values.map(parseValues);\n      const valueSets = parsedValues.map((val) => `(${val.join(\", \")})`);\n      return `INSERT INTO ${tableName} (${columns.join(\", \")})\n       VALUES ${valueSets.join(\", \")};`;\n    },\n  };\n};\n\nfunction parseValues(values: BaseValues[]) {\n  return values.map((value: BaseValues) => {\n    if (typeof value === \"string\") {\n      return `'${value}'`;\n    }\n\n    if (typeof value === \"number\") {\n      return value;\n    }\n\n    if (typeof value === \"boolean\") {\n      return value ? 1 : 0;\n    }\n\n    if (value instanceof Date) {\n      return `'${value.toISOString()}'`;\n    }\n\n    if (value === null) {\n      return \"NULL\";\n    }\n\n    if (typeof value === \"function\") {\n      return;\n    }\n\n    return value || \"DEFAULT\";\n  });\n}\n\nexport default insertTemplate;\n","import { camelToSnakeCase } from \"../../../CaseUtils\";\n\nconst updateTemplate = (table: string) => {\n  return {\n    update: (\n      columns: string[],\n      values: string[],\n      primaryKey?: string,\n      primaryKeyValue?: string | undefined,\n    ) => {\n      columns = columns.map((column) => camelToSnakeCase(column));\n      return `UPDATE ${table} SET ${columns\n        .map((column, index) => parseColumnValue(column, values[index]))\n        .filter((column) => column !== undefined)\n        .join(\", \")} WHERE ${primaryKey} = ${primaryKeyValue};`;\n    },\n  };\n};\n\nfunction parseColumnValue(column: string, value: any) {\n  if (typeof value === \"string\") {\n    return `${column} = '${value}'`;\n  }\n\n  if (typeof value === \"number\") {\n    return `${column} = ${value}`;\n  }\n\n  if (typeof value === \"boolean\") {\n    return `${column} = ${value ? 1 : 0}`;\n  }\n\n  if (value instanceof Date) {\n    return `${column} = '${value.toISOString()}'`;\n  }\n\n  if (value === null) {\n    return `${column} = NULL`;\n  }\n\n  if (typeof value === \"function\") {\n    return;\n  }\n\n  return `${column} = ${value}`;\n}\n\nexport default updateTemplate;\n","const deleteTemplate = (tableName: string) => {\n  return {\n    delete: (column: string, value: string | number | boolean | Date) =>\n      `\\nDELETE FROM ${tableName} WHERE ${column} = ${parseValue(value)} `,\n  };\n};\n\nfunction parseValue(value: any) {\n  if (typeof value === \"string\") {\n    return `'${value}'`;\n  }\n\n  if (typeof value === \"number\") {\n    return value;\n  }\n\n  if (typeof value === \"boolean\") {\n    return value ? 1 : 0;\n  }\n\n  if (value instanceof Date) {\n    return `'${value.toISOString()}'`;\n  }\n\n  return value;\n}\n\nexport default deleteTemplate;\n","import winston from \"winston\";\n\ninterface LogColors {\n  info: string;\n  warn: string;\n  error: string;\n  [key: string]: string;\n}\n\nconst colors: LogColors = {\n  info: \"\\x1b[32m\",\n  warn: \"\\x1b[33m\",\n  error: \"\\x1b[31m\",\n};\n\nconst logFormat = winston.format.combine(\n  winston.format.timestamp({ format: \"YYYY-MM-DD HH:mm:ss\" }),\n  winston.format.printf(({ level, message, timestamp }) => {\n    const color = colors[level] || \"\\x1b[0m\";\n    return `${timestamp} ${color}${level}\\x1b[0m: ${color}${message}\\x1b[0m`;\n  }),\n);\n\nconst consoleTransport = new winston.transports.Console();\nconst fileTransport = new winston.transports.File({ filename: \"logfile.log\" });\n\nconst logger = winston.createLogger({\n  format: logFormat,\n  transports: [consoleTransport, fileTransport],\n});\n\nexport function log(query: string, logs: boolean) {\n  if (!logs) {\n    return;\n  }\n\n  logger.info(\"\\n\" + query);\n}\nexport function queryError(error: any) {\n  logger.error(\"Query Failed \", error);\n}\n\nexport default logger;\n","/**\n * @description Queries to retrieve model's relations from the related relation type\n */\nimport { Relation, RelationType } from \"../../Models/Relations/Relation\";\nimport { Model } from \"../../Models/Model\";\nimport { camelToSnakeCase } from \"../../../CaseUtils\";\n\nfunction relationTemplates<T extends Model>(model: T, relation: Relation) {\n  const primaryKey = model.metadata.primaryKey as keyof T;\n  switch (relation.type) {\n    case RelationType.hasOne:\n      return `SELECT * FROM ${relation.relatedModel} WHERE ${\n        relation.relatedModel\n      }.${camelToSnakeCase(relation.foreignKey as string)} = ${camelToSnakeCase(\n        model[primaryKey] as string,\n      )} LIMIT 1;`;\n\n    case RelationType.belongsTo:\n      return `SELECT * FROM ${relation.relatedModel} WHERE ${\n        relation.relatedModel\n      }.${primaryKey.toString()} = ${\n        model[camelToSnakeCase(relation.foreignKey) as keyof T]\n      };`;\n\n    case RelationType.hasMany:\n      return `SELECT * FROM ${relation.relatedModel} WHERE ${\n        relation.relatedModel\n      }.${camelToSnakeCase(relation.foreignKey as string)} = ${camelToSnakeCase(\n        model[primaryKey] as string,\n      )};`;\n\n    default:\n      return \"\";\n  }\n}\n\nexport default relationTemplates;\n","import { camelToSnakeCase } from \"../../../CaseUtils\";\n\nexport type WhereOperatorType = \"=\" | \"!=\" | \">\" | \"<\" | \">=\" | \"<=\" | \"LIKE\";\ntype BaseValues = string | number | boolean | Date;\n\nconst whereTemplate = (tableName: string) => {\n  return {\n    where: (\n      column: string,\n      value: BaseValues,\n      operator: WhereOperatorType = \"=\",\n    ) =>\n      `\\nWHERE ${tableName}.${camelToSnakeCase(column)} = ${parseValue(\n        value,\n      )} `,\n    andWhere: (\n      column: string,\n      value: BaseValues,\n      operator: WhereOperatorType = \"=\",\n    ) =>\n      ` AND ${tableName}.${camelToSnakeCase(column)} = ${parseValue(value)} `,\n    orWhere: (\n      column: string,\n      value: BaseValues,\n      operator: WhereOperatorType = \"=\",\n    ) => ` OR ${tableName}.${camelToSnakeCase(column)} = ${parseValue(value)} `,\n    whereNot: (column: string, value: BaseValues) =>\n      `\\nWHERE ${tableName}.${camelToSnakeCase(column)} != ${parseValue(\n        value,\n      )} `,\n    andWhereNot: (column: string, value: BaseValues) =>\n      ` AND ${tableName}.${camelToSnakeCase(column)} != ${parseValue(value)} `,\n    orWhereNot: (column: string, value: BaseValues) =>\n      ` OR ${tableName}.${camelToSnakeCase(column)} != ${parseValue(value)} `,\n    whereNull: (column: string) =>\n      `\\nWHERE ${tableName}.${camelToSnakeCase(column)} IS NULL `,\n    andWhereNull: (column: string) =>\n      ` AND ${tableName}.${camelToSnakeCase(column)} IS NULL `,\n    orWhereNull: (column: string) =>\n      ` OR ${tableName}.${camelToSnakeCase(column)} IS NULL `,\n    whereNotNull: (column: string) =>\n      `\\nWHERE ${tableName}.${camelToSnakeCase(column)} IS NOT NULL `,\n    andWhereNotNull: (column: string) =>\n      ` AND ${tableName}.${camelToSnakeCase(column)} IS NOT NULL `,\n    orWhereNotNull: (column: string) =>\n      ` OR ${tableName}.${camelToSnakeCase(column)} IS NOT NULL `,\n    whereBetween: (column: string, min: BaseValues, max: BaseValues) =>\n      `\\nWHERE ${tableName}.${camelToSnakeCase(\n        column,\n      )} BETWEEN ${min} AND ${max} `,\n    andWhereBetween: (column: string, min: BaseValues, max: BaseValues) =>\n      ` AND ${tableName}.${camelToSnakeCase(\n        column,\n      )} BETWEEN ${min} AND ${max} `,\n    orWhereBetween: (column: string, min: BaseValues, max: BaseValues) =>\n      ` OR ${tableName}.${camelToSnakeCase(column)} BETWEEN ${min} AND ${max} `,\n    whereNotBetween: (column: string, min: BaseValues, max: BaseValues) =>\n      `\\nWHERE ${tableName}.${camelToSnakeCase(\n        column,\n      )} NOT BETWEEN ${min} AND ${max} `,\n    andWhereNotBetween: (column: string, min: BaseValues, max: BaseValues) =>\n      ` AND ${tableName}.${camelToSnakeCase(\n        column,\n      )} NOT BETWEEN ${min} AND ${max} `,\n    orWhereNotBetween: (column: string, min: BaseValues, max: BaseValues) =>\n      ` OR ${tableName}.${camelToSnakeCase(\n        column,\n      )} NOT BETWEEN ${min} AND ${max} `,\n    whereIn: (column: string, values: BaseValues[]) =>\n      `\\nWHERE ${tableName}.${camelToSnakeCase(column)} IN (${values\n        .map((value: BaseValues) => parseValue(value))\n        .join(\", \")}) `,\n    andWhereIn: (column: string, values: BaseValues[]) =>\n      ` AND ${tableName}.${camelToSnakeCase(column)} IN (${values\n        .map((value: BaseValues) => parseValue(value))\n        .join(\", \")}) `,\n    orWhereIn: (column: string, values: BaseValues[]) =>\n      ` OR ${tableName}.${camelToSnakeCase(column)} IN (${values\n        .map((value: BaseValues) => parseValue(value))\n        .join(\", \")}) `,\n    whereNotIn: (column: string, values: BaseValues[]) =>\n      `\\nWHERE ${tableName}.${camelToSnakeCase(column)} NOT IN (${values\n        .map((value: BaseValues) => parseValue(value))\n        .join(\", \")}) `,\n    andWhereNotIn: (column: string, values: BaseValues[]) =>\n      ` AND ${tableName}.${camelToSnakeCase(column)} NOT IN (${values\n        .map((value: BaseValues) => parseValue(value))\n        .join(\", \")}) `,\n    orWhereNotIn: (column: string, values: BaseValues[]) =>\n      ` OR ${tableName}.${camelToSnakeCase(column)} NOT IN (${values\n        .map((value: BaseValues) => parseValue(value))\n        .join(\", \")}) `,\n    rawWhere: (query: string) => `\\nWHERE ${query} `,\n    rawAndWhere: (query: string) => ` AND ${query} `,\n    rawOrWhere: (query: string) => ` OR ${query} `,\n  };\n};\n\nexport type WhereTemplateType = {\n  where: (\n    column: string,\n    value: BaseValues,\n    operator: WhereOperatorType,\n  ) => string;\n  andWhere: (\n    column: string,\n    value: BaseValues,\n    operator: WhereOperatorType,\n  ) => string;\n  orWhere: (\n    column: string,\n    value: BaseValues,\n    operator: WhereOperatorType,\n  ) => string;\n  whereNot: (column: string, value: BaseValues) => string;\n  andWhereNot: (column: string, value: BaseValues) => string;\n  orWhereNot: (column: string, value: BaseValues) => string;\n  whereNull: (column: string) => string;\n  andWhereNull: (column: string) => string;\n  orWhereNull: (column: string) => string;\n  whereNotNull: (column: string) => string;\n  andWhereNotNull: (column: string) => string;\n  orWhereNotNull: (column: string) => string;\n  whereBetween: (column: string, min: BaseValues, max: BaseValues) => string;\n  andWhereBetween: (column: string, min: BaseValues, max: BaseValues) => string;\n  orWhereBetween: (column: string, min: BaseValues, max: BaseValues) => string;\n  whereNotBetween: (column: string, min: BaseValues, max: BaseValues) => string;\n  andWhereNotBetween: (\n    column: string,\n    min: BaseValues,\n    max: BaseValues,\n  ) => string;\n  orWhereNotBetween: (\n    column: string,\n    min: BaseValues,\n    max: BaseValues,\n  ) => string;\n  whereIn: (column: string, values: BaseValues[]) => string;\n  andWhereIn: (column: string, values: BaseValues[]) => string;\n  orWhereIn: (column: string, values: BaseValues[]) => string;\n  whereNotIn: (column: string, values: BaseValues[]) => string;\n  andWhereNotIn: (column: string, values: BaseValues[]) => string;\n  orWhereNotIn: (column: string, values: BaseValues[]) => string;\n  rawWhere: (query: string) => string;\n  rawAndWhere: (query: string) => string;\n  rawOrWhere: (query: string) => string;\n};\n\nfunction parseValue(value: BaseValues) {\n  if (typeof value === \"string\") {\n    return `'${value}'`;\n  }\n\n  if (typeof value === \"number\") {\n    return value;\n  }\n\n  if (typeof value === \"boolean\") {\n    return value ? 1 : 0;\n  }\n  return `'${value.toISOString()}'`;\n}\n\nexport default whereTemplate;\n","import {\n  FindType,\n  FindOneType,\n} from \"../Models/ModelManager/ModelManagerTypes\";\nimport selectTemplate from \"../Templates/Query/SELECT\";\nimport { Model } from \"../Models/Model\";\nimport insertTemplate from \"../Templates/Query/INSERT\";\nimport updateTemplate from \"../Templates/Query/UPDATE\";\nimport deleteTemplate from \"../Templates/Query/DELETE\";\nimport { Relation } from \"../Models/Relations/Relation\";\nimport { log, queryError } from \"../../Logger\";\nimport relationTemplates from \"../Templates/Query/RELATIONS\";\nimport { Pool, RowDataPacket } from \"mysql2/promise\";\nimport whereTemplate from \"../Templates/Query/WHERE.TS\";\n\nclass MySqlModelManagerUtils<T extends Model> {\n  public parseSelectQueryInput(\n    model: T,\n    input: FindType | FindOneType,\n  ): string {\n    let query = \"\";\n    query += this.parseSelect(model.metadata.tableName, input);\n    query += this.parseWhere(model.metadata.tableName, input);\n    query += this.parseQueryFooter(model.metadata.tableName, input);\n\n    return query;\n  }\n\n  private parseSelect(\n    tableName: string,\n    input: FindType | FindOneType,\n  ): string {\n    const select = selectTemplate(tableName);\n    return input.select\n      ? select.selectColumns(...input.select)\n      : select.selectAll;\n  }\n\n  private parseWhere(tableName: string, input: FindType | FindOneType): string {\n    const where = whereTemplate(tableName);\n    if (!input.where) {\n      return \"\";\n    }\n\n    let query = \"\";\n    const entries = Object.entries(input.where);\n    for (let index = 0; index < entries.length; index++) {\n      const [key, value] = entries[index];\n\n      if (index === 0) {\n        query += where.where(key, value);\n        continue;\n      }\n      query += where.andWhere(key, value);\n    }\n\n    return query;\n  }\n  private parseQueryFooter(\n    tableName: string,\n    input: FindType | FindOneType,\n  ): string {\n    if (!this.isFindType(input)) {\n      return \"\";\n    }\n\n    const select = selectTemplate(tableName);\n    let query = \"\";\n    if (input.offset) {\n      query += select.offset(input.offset);\n    }\n\n    if (input.groupBy) {\n      query += select.groupBy(...input.groupBy);\n    }\n\n    if (input.orderBy) {\n      query += select.orderBy([...input.orderBy.columns], input.orderBy.type);\n    }\n\n    if (input.limit) {\n      query += select.limit(input.limit);\n    }\n\n    return query;\n  }\n\n  public parseInsert(model: T): string {\n    const filteredModel = this.filterRelationsAndMetadata(model);\n    const keys = Object.keys(filteredModel);\n    const values = Object.values(filteredModel);\n    const insert = insertTemplate(model.metadata.tableName);\n\n    return insert.insert(keys, values);\n  }\n\n  public parseUpdate(model: T, modelName?: string): string {\n    const update = updateTemplate(modelName || model.metadata.tableName);\n    const filteredModel = this.filterRelationsAndMetadata(model);\n    const keys = Object.keys(filteredModel);\n    const values = Object.values(filteredModel);\n\n    const primaryKey = model.metadata.primaryKey as string;\n    const primaryKeyValue = model[primaryKey as keyof T];\n\n    return update.update(keys, values, primaryKey, primaryKeyValue as string);\n  }\n\n  private filterRelationsAndMetadata(model: T): T {\n    const filteredModel = {};\n\n    const keys = Object.keys(model);\n    for (const key of keys) {\n      if (key === \"metadata\") {\n        continue;\n      }\n\n      if (\n        typeof model[key as keyof T] === \"object\" &&\n        (model[key as keyof T] !== null ||\n          !Array.isArray(model[key as keyof T]))\n      ) {\n        continue;\n      }\n\n      Object.assign(filteredModel, { [key]: model[key as keyof T] });\n    }\n\n    return filteredModel as T;\n  }\n\n  public parseDelete(\n    tableName: string,\n    column: string,\n    value: string | number | boolean,\n  ): string {\n    return deleteTemplate(tableName).delete(column, value.toString());\n  }\n\n  private isFindType(input: FindType | FindOneType): input is FindType {\n    const instance = input as FindType;\n    return (\n      instance.hasOwnProperty(\"offset\") ||\n      instance.hasOwnProperty(\"groupBy\") ||\n      instance.hasOwnProperty(\"orderBy\") ||\n      instance.hasOwnProperty(\"limit\")\n    );\n  }\n\n  /*private _parseJoin(model: T, input: FindType | FindOneType): string {\n    if (!input.relations) {\n      return \"\";\n    }\n\n    const relations: string[] = input.relations.map((relationField) => {\n      const relation: Relation = this.getRelationFromModel(\n        model,\n        relationField,\n      );\n      const join = joinTemplate(model.metadata.tableName, relation.relatedModel);\n      switch (relation.type) {\n        case RelationType.belongsTo:\n          const belongsTo = relation as BelongsTo;\n          return join.belongsTo(belongsTo.foreignKey);\n\n        case RelationType.hasOne:\n          return join.hasOne();\n        case RelationType.hasMany:\n          return join.hasMany(model.metadata.primaryKey as string);\n\n        default:\n          throw new Error(\"Relation type not supported\");\n      }\n    });\n\n    return relations.join(\"\\n\");\n  }*/\n\n  private getRelationFromModel(model: T, relationField: string): Relation {\n    const relation = model[relationField as keyof T] as Relation;\n    if (!relation) {\n      throw new Error(\n        \"Relation \" +\n          relationField +\n          \" not found in model \" +\n          model.metadata.tableName,\n      );\n    }\n\n    return relation;\n  }\n\n  // Parses and fills input relations directly into the model\n  public async parseRelationInput(\n    model: T,\n    input: FindOneType,\n    mysqlConnection: Pool,\n    logs: boolean,\n  ): Promise<void> {\n    if (!input.relations) {\n      return;\n    }\n\n    if (!model.metadata.primaryKey) {\n      throw new Error(\"Model does not have a primary key\");\n    }\n\n    try {\n      const relationPromises = input.relations.map(\n        async (inputRelation: string) => {\n          const relation = this.getRelationFromModel(model, inputRelation);\n          const relationQuery = relationTemplates(model, relation);\n          console.log(relationQuery);\n\n          const [relatedModels] =\n            await mysqlConnection.query<RowDataPacket[]>(relationQuery);\n          if (relatedModels.length === 0) {\n            Object.assign(model, { [inputRelation as keyof T]: null });\n            log(relationQuery, logs);\n            return;\n          }\n\n          if (relatedModels.length === 1) {\n            Object.assign(model, {\n              [inputRelation as keyof T]: relatedModels[0],\n            });\n            log(relationQuery, logs);\n            return;\n          }\n\n          Object.assign(model, { [inputRelation as keyof T]: relatedModels });\n          log(relationQuery, logs);\n        },\n      );\n\n      await Promise.all(relationPromises);\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Failed to parse relations \" + error);\n    }\n  }\n\n  // Parses and fills input relations directly into the model\n  public async parseQueryBuilderRelations(\n    model: T,\n    input: string[],\n    mysqlConnection: Pool,\n    logs: boolean,\n  ): Promise<void> {\n    if (input.length === 0) {\n      return;\n    }\n\n    if (!model.metadata.primaryKey) {\n      throw new Error(\"Model does not have a primary key\");\n    }\n\n    let relationQuery: string = \"\";\n    try {\n      const relationPromises = input.map(async (inputRelation: string) => {\n        const relation = this.getRelationFromModel(model, inputRelation);\n        relationQuery = relationTemplates(model, relation);\n\n        const [relatedModels] =\n          await mysqlConnection.query<RowDataPacket[]>(relationQuery);\n        if (relatedModels.length === 0) {\n          Object.assign(model, { [inputRelation as keyof T]: null });\n          log(relationQuery, logs);\n          return;\n        }\n\n        if (relatedModels.length === 1) {\n          Object.assign(model, {\n            [inputRelation as keyof T]: relatedModels[0],\n          });\n          log(relationQuery, logs);\n          return;\n        }\n\n        Object.assign(model, { [inputRelation as keyof T]: relatedModels });\n        log(relationQuery, logs);\n      });\n\n      await Promise.all(relationPromises);\n    } catch (error) {\n      queryError(\"Query Error: \" + relationQuery + error);\n      throw new Error(\"Failed to parse relations \" + error);\n    }\n  }\n}\n\nexport default new MySqlModelManagerUtils();\n","import { Pool } from \"mysql2/promise\";\nimport selectTemplate, { SelectTemplateType } from \"../Templates/Query/SELECT\";\nimport { Model } from \"../Models/Model\";\nimport whereTemplate, {\n  WhereOperatorType,\n  WhereTemplateType,\n} from \"../Templates/Query/WHERE.TS\";\nimport { MysqlQueryBuilder } from \"../Mysql/MysqlQueryBuilder\";\nimport { PostgresQueryBuilder } from \"../Postgres/PostgresQueryBuilder\";\n\nexport abstract class QueryBuilder<T extends Model> {\n  protected selectQuery: string = \"\";\n  protected relations: string[] = [];\n  protected whereQuery: string = \"\";\n  protected groupByQuery: string = \"\";\n  protected orderByQuery: string = \"\";\n  protected limitQuery: string = \"\";\n  protected offsetQuery: string = \"\";\n\n  protected model: new () => Model;\n  protected tableName: string;\n  protected logs: boolean;\n\n  protected selectTemplate: SelectTemplateType;\n  protected whereTemplate: WhereTemplateType;\n\n  /**\n   * @description Constructs a MysqlQueryBuilder instance.\n   * @param model - The model class associated with the table.\n   * @param tableName - The name of the table.\n   * @param mysqlConnection - The MySQL connection pool.\n   * @param logs - A boolean indicating whether to log queries.\n   */\n  protected constructor(\n    model: new () => Model,\n    tableName: string,\n    logs: boolean,\n  ) {\n    this.model = model;\n    this.logs = logs;\n    this.tableName = tableName;\n    this.selectQuery = selectTemplate(this.tableName).selectAll;\n    this.selectTemplate = selectTemplate(this.tableName);\n    this.whereTemplate = whereTemplate(this.tableName);\n  }\n\n  /**\n   * @description Executes the query and retrieves the first result.\n   * @returns A Promise resolving to the first result or null.\n   */\n  public abstract one(): Promise<T | null>;\n\n  /**\n   * @description Executes the query and retrieves multiple results.\n   * @returns A Promise resolving to an array of results.\n   */\n  public abstract many(): Promise<T[]>;\n\n  /**\n   * @description Columns are customizable with aliases. By default, without this function, all columns are selected\n   * @param columns\n   */\n  public abstract select(\n    ...columns: string[]\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds a relation to the query.\n   * @param relations - The relations to add.\n   */\n  public abstract addRelations(\n    relations: string[],\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds a WHERE condition to the query.\n   * @param column - The column to filter.\n   * @param operator - The comparison operator.\n   * @param value - The value to compare against.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract where(\n    column: string,\n    operator: WhereOperatorType,\n    value: string | number | boolean | Date,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds an AND WHERE condition to the query.\n   * @param column - The column to filter.\n   * @param operator - The comparison operator.\n   * @param value - The value to compare against.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract andWhere(\n    column: string,\n    operator: WhereOperatorType,\n    value: string | number | boolean | Date,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds an OR WHERE condition to the query.\n   * @param column - The column to filter.\n   * @param operator - The comparison operator.\n   * @param value - The value to compare against.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract orWhere(\n    column: string,\n    operator: WhereOperatorType,\n    value: string | number | boolean | Date,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds a WHERE BETWEEN condition to the query.\n   * @param column - The column to filter.\n   * @param min - The minimum value for the range.\n   * @param max - The maximum value for the range.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract whereBetween(\n    column: string,\n    min: string,\n    max: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds an AND WHERE BETWEEN condition to the query.\n   * @param column - The column to filter.\n   * @param min - The minimum value for the range.\n   * @param max - The maximum value for the range.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract andWhereBetween(\n    column: string,\n    min: string,\n    max: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds an OR WHERE BETWEEN condition to the query.\n   * @param column - The column to filter.\n   * @param min - The minimum value for the range.\n   * @param max - The maximum value for the range.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract orWhereBetween(\n    column: string,\n    min: string,\n    max: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds a WHERE NOT BETWEEN condition to the query.\n   * @param column - The column to filter.\n   * @param min - The minimum value for the range.\n   * @param max - The maximum value for the range.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract whereNotBetween(\n    column: string,\n    min: string,\n    max: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds an OR WHERE NOT BETWEEN condition to the query.\n   * @param column - The column to filter.\n   * @param min - The minimum value for the range.\n   * @param max - The maximum value for the range.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract orWhereNotBetween(\n    column: string,\n    min: string,\n    max: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds a WHERE IN condition to the query.\n   * @param column - The column to filter.\n   * @param values - An array of values to match against.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract whereIn(\n    column: string,\n    values: string[],\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds an AND WHERE IN condition to the query.\n   * @param column - The column to filter.\n   * @param values - An array of values to match against.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract andWhereIn(\n    column: string,\n    values: string[],\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds an OR WHERE IN condition to the query.\n   * @param column - The column to filter.\n   * @param values - An array of values to match against.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract orWhereIn(\n    column: string,\n    values: string[],\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds a WHERE NOT IN condition to the query.\n   * @param column - The column to filter.\n   * @param values - An array of values to exclude.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract whereNotIn(\n    column: string,\n    values: string[],\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds an OR WHERE NOT IN condition to the query.\n   * @param column - The column to filter.\n   * @param values - An array of values to exclude.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract orWhereNotIn(\n    column: string,\n    values: string[],\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds a WHERE NULL condition to the query.\n   * @param column - The column to filter.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract whereNull(\n    column: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds an AND WHERE NULL condition to the query.\n   * @param column - The column to filter.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract andWhereNull(\n    column: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds an OR WHERE NULL condition to the query.\n   * @param column - The column to filter.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract orWhereNull(\n    column: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds a WHERE NOT NULL condition to the query.\n   * @param column - The column to filter.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract whereNotNull(\n    column: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds an AND WHERE NOT NULL condition to the query.\n   * @param column - The column to filter.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract andWhereNotNull(\n    column: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds an OR WHERE NOT NULL condition to the query.\n   * @param column - The column to filter.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract orWhereNotNull(\n    column: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds a raw WHERE condition to the query.\n   * @param query - The raw SQL WHERE condition.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract rawWhere(\n    query: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds a raw AND WHERE condition to the query.\n   * @param query - The raw SQL WHERE condition.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract rawAndWhere(\n    query: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds a raw OR WHERE condition to the query.\n   * @param query - The raw SQL WHERE condition.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract rawOrWhere(\n    query: string,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds GROUP BY conditions to the query.\n   * @param columns - The columns to group by.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract groupBy(\n    ...columns: string[]\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds ORDER BY conditions to the query.\n   * @param column - The column to order by.\n   * @param order - The order direction, either \"ASC\" or \"DESC\".\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract orderBy(\n    column: string[],\n    order: \"ASC\" | \"DESC\",\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds a LIMIT condition to the query.\n   * @param limit - The maximum number of rows to return.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract limit(\n    limit: number,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  /**\n   * @description Adds an OFFSET condition to the query.\n   * @param offset - The number of rows to skip.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public abstract offset(\n    offset: number,\n  ): MysqlQueryBuilder<T> | PostgresQueryBuilder<T>;\n\n  protected groupFooterQuery(): string {\n    return (\n      this.groupByQuery + this.orderByQuery + this.limitQuery + this.offsetQuery\n    );\n  }\n}\n","import { Pool, RowDataPacket } from \"mysql2/promise\";\nimport selectTemplate from \"../Templates/Query/SELECT\";\nimport { Model } from \"../Models/Model\";\nimport { log } from \"../../Logger\";\nimport ModelManagerUtils from \"./MySqlModelManagerUtils\";\nimport whereTemplate, { WhereOperatorType } from \"../Templates/Query/WHERE.TS\";\nimport { QueryBuilder } from \"../QueryBuilder/QueryBuilder\";\nimport {modelFromSnakeCaseToCamel} from \"../../CaseUtils\";\n\nexport class MysqlQueryBuilder<T extends Model> extends QueryBuilder<T> {\n  protected mysqlPool: Pool;\n\n  /**\n   * @description Constructs a MysqlQueryBuilder instance.\n   * @param model - The model class associated with the table.\n   * @param tableName - The name of the table.\n   * @param mysqlPool - The MySQL connection pool.\n   * @param logs - A boolean indicating whether to log queries.\n   */\n  public constructor(\n    model: new () => T,\n    tableName: string,\n    mysqlPool: Pool,\n    logs: boolean,\n  ) {\n    super(model, tableName, logs);\n    this.mysqlPool = mysqlPool;\n  }\n\n  private mergeRetrievedDataIntoModel(\n    model: T,\n    row: RowDataPacket ,\n  ) {\n    Object.entries(row).forEach(([key, value]) => {\n        if (Object.hasOwnProperty.call(model, key)) {\n          Object.assign(model, { [key]: value });\n        } else {\n          model.aliasColumns[key] = value as string | number | boolean\n        }\n    })\n  }\n\n  /**\n   * @description Executes the query and retrieves the first result.\n   * @returns A Promise resolving to the first result or null.\n   */\n  public async one(): Promise<T | null> {\n    let query = this.selectQuery;\n    if (this.whereQuery) {\n      query += this.whereQuery;\n    }\n\n    log(query, this.logs);\n    const model = new this.model() as T;\n    try {\n      const [rows] = await this.mysqlPool.query<RowDataPacket[]>(query);\n      const modelData = rows[0];\n\n      this.mergeRetrievedDataIntoModel(model, modelData)\n\n      // relations parsing on the queried model\n      await ModelManagerUtils.parseQueryBuilderRelations(\n        model,\n        this.relations,\n        this.mysqlPool,\n        this.logs,\n      );\n\n      return modelFromSnakeCaseToCamel(model) as T;\n    } catch (error) {\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * @description Executes the query and retrieves multiple results.\n   * @returns A Promise resolving to an array of results.\n   */\n  public async many(): Promise<T[]> {\n    let query = this.selectQuery;\n    if (this.whereQuery) {\n      query += this.whereQuery;\n    }\n\n    query += this.groupFooterQuery();\n\n    log(query, this.logs);\n    const model = new this.model() as T;\n    try {\n      const [rows] = await this.mysqlPool.query<RowDataPacket[]>(query);\n      return Promise.all(\n        rows.map(async (row) => {\n          const modelData = rows[0] as T;\n\n          this.mergeRetrievedDataIntoModel(model, row)\n\n          // relations parsing on the queried model\n          await ModelManagerUtils.parseQueryBuilderRelations(\n            model,\n            this.relations,\n            this.mysqlPool,\n            this.logs,\n          );\n\n          return modelFromSnakeCaseToCamel(model) as T;\n        }),\n      );\n    } catch (error) {\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * @description Columns are customizable with aliases. By default, without this function, all columns are selected\n   * @param columns\n   */\n  public select(...columns: string[]) {\n    const select = selectTemplate(this.tableName);\n    this.selectQuery = select.selectColumns(...columns);\n    return this;\n  }\n\n  public addRelations(relations: string[]) {\n    this.relations = relations;\n    return this;\n  }\n\n  /**\n   * @description Adds a WHERE condition to the query.\n   * @param column - The column to filter.\n   * @param operator - The comparison operator.\n   * @param value - The value to compare against.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public where(\n    column: string,\n    operator: WhereOperatorType,\n    value: string | number | boolean | Date,\n  ): this {\n    if (this.whereQuery) {\n      this.whereQuery += this.whereTemplate.andWhere(\n        column,\n        value.toString(),\n        operator,\n      );\n      return this;\n    }\n    this.whereQuery = this.whereTemplate.where(\n      column,\n      value.toString(),\n      operator,\n    );\n    return this;\n  }\n\n  /**\n   * @description Adds an AND WHERE condition to the query.\n   * @param column - The column to filter.\n   * @param operator - The comparison operator.\n   * @param value - The value to compare against.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public andWhere(\n    column: string,\n    operator: WhereOperatorType,\n    value: string | number | boolean | Date,\n  ): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.where(\n        column,\n        value.toString(),\n        operator,\n      );\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).andWhere(\n      column,\n      value.toString(),\n      operator,\n    );\n    return this;\n  }\n\n  /**\n   * @description Adds an OR WHERE condition to the query.\n   * @param column - The column to filter.\n   * @param operator - The comparison operator.\n   * @param value - The value to compare against.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public orWhere(\n    column: string,\n    operator: WhereOperatorType,\n    value: string | number | boolean | Date,\n  ): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.where(\n        column,\n        value.toString(),\n        operator,\n      );\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhere(\n      column,\n      value.toString(),\n      operator,\n    );\n    return this;\n  }\n\n  /**\n   * @description Adds a WHERE BETWEEN condition to the query.\n   * @param column - The column to filter.\n   * @param min - The minimum value for the range.\n   * @param max - The maximum value for the range.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public whereBetween(column: string, min: string, max: string): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereBetween(column, min, max);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).whereBetween(\n      column,\n      min,\n      max,\n    );\n    return this;\n  }\n\n  /**\n   * @description Adds an AND WHERE BETWEEN condition to the query.\n   * @param column - The column to filter.\n   * @param min - The minimum value for the range.\n   * @param max - The maximum value for the range.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public andWhereBetween(column: string, min: string, max: string): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereBetween(column, min, max);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).andWhereBetween(\n      column,\n      min,\n      max,\n    );\n    return this;\n  }\n\n  /**\n   * @description Adds an OR WHERE BETWEEN condition to the query.\n   * @param column - The column to filter.\n   * @param min - The minimum value for the range.\n   * @param max - The maximum value for the range.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public orWhereBetween(column: string, min: string, max: string): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereBetween(column, min, max);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhereBetween(\n      column,\n      min,\n      max,\n    );\n    return this;\n  }\n\n  /**\n   * @description Adds a WHERE NOT BETWEEN condition to the query.\n   * @param column - The column to filter.\n   * @param min - The minimum value for the range.\n   * @param max - The maximum value for the range.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public whereNotBetween(column: string, min: string, max: string): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.andWhereNotBetween(column, min, max);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).whereNotBetween(\n      column,\n      min,\n      max,\n    );\n    return this;\n  }\n\n  /**\n   * @description Adds an OR WHERE NOT BETWEEN condition to the query.\n   * @param column - The column to filter.\n   * @param min - The minimum value for the range.\n   * @param max - The maximum value for the range.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public orWhereNotBetween(column: string, min: string, max: string): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereNotBetween(column, min, max);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhereNotBetween(\n      column,\n      min,\n      max,\n    );\n    return this;\n  }\n\n  /**\n   * @description Adds a WHERE IN condition to the query.\n   * @param column - The column to filter.\n   * @param values - An array of values to match against.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public whereIn(column: string, values: string[]): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereIn(column, values);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).whereIn(column, values);\n    return this;\n  }\n\n  /**\n   * @description Adds an AND WHERE IN condition to the query.\n   * @param column - The column to filter.\n   * @param values - An array of values to match against.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public andWhereIn(column: string, values: string[]): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereIn(column, values);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).andWhereIn(column, values);\n    return this;\n  }\n\n  /**\n   * @description Adds an OR WHERE IN condition to the query.\n   * @param column - The column to filter.\n   * @param values - An array of values to match against.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public orWhereIn(column: string, values: string[]): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereIn(column, values);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhereIn(column, values);\n    return this;\n  }\n\n  /**\n   * @description Adds a WHERE NOT IN condition to the query.\n   * @param column - The column to filter.\n   * @param values - An array of values to exclude.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public whereNotIn(column: string, values: string[]): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.andWhereNotIn(column, values);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).whereNotIn(column, values);\n    return this;\n  }\n\n  /**\n   * @description Adds an OR WHERE NOT IN condition to the query.\n   * @param column - The column to filter.\n   * @param values - An array of values to exclude.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public orWhereNotIn(column: string, values: string[]): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereNotIn(column, values);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhereNotIn(\n      column,\n      values,\n    );\n    return this;\n  }\n\n  /**\n   * @description Adds a WHERE NULL condition to the query.\n   * @param column - The column to filter.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public whereNull(column: string): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.andWhereNull(column);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).whereNull(column);\n    return this;\n  }\n\n  /**\n   * @description Adds an AND WHERE NULL condition to the query.\n   * @param column - The column to filter.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public andWhereNull(column: string): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereNull(column);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).andWhereNull(column);\n    return this;\n  }\n\n  /**\n   * @description Adds an OR WHERE NULL condition to the query.\n   * @param column - The column to filter.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public orWhereNull(column: string): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereNull(column);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhereNull(column);\n    return this;\n  }\n\n  /**\n   * @description Adds a WHERE NOT NULL condition to the query.\n   * @param column - The column to filter.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public whereNotNull(column: string): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.andWhereNotNull(column);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).whereNotNull(column);\n    return this;\n  }\n\n  /**\n   * @description Adds an AND WHERE NOT NULL condition to the query.\n   * @param column - The column to filter.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public andWhereNotNull(column: string): this {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereNotNull(column);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).andWhereNotNull(column);\n    return this;\n  }\n\n  /**\n   * @description Adds an OR WHERE NOT NULL condition to the query.\n   * @param column - The column to filter.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public orWhereNotNull(column: string) {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereNotNull(column);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhereNotNull(column);\n    return this;\n  }\n\n  /**\n   * @description Adds a raw WHERE condition to the query.\n   * @param query - The raw SQL WHERE condition.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public rawWhere(query: string) {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.rawAndWhere(query);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).rawWhere(query);\n    return this;\n  }\n\n  /**\n   * @description Adds a raw AND WHERE condition to the query.\n   * @param query - The raw SQL WHERE condition.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public rawAndWhere(query: string) {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.rawWhere(query);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).rawAndWhere(query);\n    return this;\n  }\n\n  /**\n   * @description Adds a raw OR WHERE condition to the query.\n   * @param query - The raw SQL WHERE condition.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public rawOrWhere(query: string) {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.rawWhere(query);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).rawOrWhere(query);\n    return this;\n  }\n\n  /**\n   * @description Adds GROUP BY conditions to the query.\n   * @param columns - The columns to group by.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public groupBy(...columns: string[]) {\n    this.groupByQuery = this.selectTemplate.groupBy(...columns);\n    return this;\n  }\n\n  /**\n   * @description Adds ORDER BY conditions to the query.\n   * @param column - The column to order by.\n   * @param order - The order direction, either \"ASC\" or \"DESC\".\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public orderBy(column: string[], order: \"ASC\" | \"DESC\") {\n    this.orderByQuery = this.selectTemplate.orderBy(column, order);\n    return this;\n  }\n\n  /**\n   * @description Adds a LIMIT condition to the query.\n   * @param limit - The maximum number of rows to return.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public limit(limit: number) {\n    this.limitQuery = this.selectTemplate.limit(limit);\n    return this;\n  }\n\n  /**\n   * @description Adds an OFFSET condition to the query.\n   * @param offset - The number of rows to skip.\n   * @returns The MysqlQueryBuilder instance for chaining.\n   */\n  public offset(offset: number) {\n    this.offsetQuery = this.selectTemplate.offset(offset);\n    return this;\n  }\n\n  protected groupFooterQuery(): string {\n    return (\n      this.groupByQuery + this.orderByQuery + this.limitQuery + this.offsetQuery\n    );\n  }\n}\n","export const BEGIN_TRANSACTION = \"BEGIN; \\n\";\nexport const COMMIT_TRANSACTION = \"COMMIT; \\n\";\nexport const ROLLBACK_TRANSACTION = \"ROLLBACK; \\n\";\n","import { Pool, PoolConnection, RowDataPacket } from \"mysql2/promise\";\nimport { BEGIN_TRANSACTION } from \"../Templates/Query/TRANSACTION\";\nimport { COMMIT_TRANSACTION } from \"../Templates/Query/TRANSACTION\";\nimport { ROLLBACK_TRANSACTION } from \"../Templates/Query/TRANSACTION\";\nimport { log, queryError } from \"../../Logger\";\nimport { Metadata, Model } from \"../Models/Model\";\nimport selectTemplate from \"../Templates/Query/SELECT\";\n\nexport class MysqlTransaction {\n  protected tableName: string;\n  protected mysql: Pool;\n  protected mysqlConnection!: PoolConnection;\n  protected logs: boolean;\n\n  constructor(mysql: Pool, tableName: string, logs: boolean) {\n    this.logs = logs;\n    this.mysql = mysql;\n    this.tableName = tableName;\n  }\n\n  public async queryInsert<T extends Model>(\n    query: string,\n    metadata: Metadata,\n    params?: any[],\n  ): Promise<T> {\n    if (!this.mysqlConnection) {\n      throw new Error(\"MysqlTransaction not started.\");\n    }\n\n    log(query, this.logs);\n    const [rows]: any = await this.mysqlConnection.query<RowDataPacket[]>(\n      query,\n      params,\n    );\n    const insertId = rows.insertId;\n    const select = selectTemplate(this.tableName).selectById(insertId);\n    const [savedModel] =\n      await this.mysqlConnection.query<RowDataPacket[]>(select);\n    Object.assign(savedModel[0], { metadata });\n    return savedModel[0] as T;\n  }\n\n  public async queryUpdate<T extends Model>(\n    query: string,\n    params?: any[],\n  ): Promise<number> {\n    if (!this.mysqlConnection) {\n      throw new Error(\"MysqlTransaction not started.\");\n    }\n\n    log(query, this.logs);\n    const [rows]: any = await this.mysqlConnection.query<RowDataPacket[]>(\n      query,\n      params,\n    );\n    return rows.affectedRows;\n  }\n\n  public async queryDelete(query: string, params?: any[]): Promise<number> {\n    if (!this.mysqlConnection) {\n      throw new Error(\"MysqlTransaction not started.\");\n    }\n\n    log(query, this.logs);\n    const [rows]: any = await this.mysqlConnection.query<RowDataPacket[]>(\n      query,\n      params,\n    );\n\n    return rows.affectedRows;\n  }\n\n  /**\n   * Start transaction.\n   */\n  async start(): Promise<void> {\n    try {\n      log(BEGIN_TRANSACTION, this.logs);\n      this.mysqlConnection = await this.mysql.getConnection();\n      await this.mysqlConnection.query(BEGIN_TRANSACTION);\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Failed to start transaction \" + error);\n    }\n  }\n\n  /**\n   * Commit transaction.\n   */\n  async commit(): Promise<void> {\n    if (!this.mysqlConnection) {\n      throw new Error(\"MysqlTransaction not started.\");\n    }\n\n    try {\n      log(COMMIT_TRANSACTION, this.logs);\n      await this.mysqlConnection.query(COMMIT_TRANSACTION);\n      this.mysqlConnection.release();\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Failed to commit transaction \" + error);\n    }\n  }\n\n  /**\n   * Rollback transaction.\n   */\n  async rollback(): Promise<void> {\n    if (!this.mysqlConnection) {\n      return;\n    }\n\n    try {\n      log(ROLLBACK_TRANSACTION, this.logs);\n      await this.mysqlConnection.query(ROLLBACK_TRANSACTION);\n      this.mysqlConnection.release();\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Failed to rollback transaction \" + error);\n    }\n  }\n}\n","/*\n * This class is used to make operations on models\n */\nimport { Model } from \"../Model\";\nimport { FindOneType, FindType } from \"./ModelManagerTypes\";\nimport { MysqlQueryBuilder } from \"../../Mysql/MysqlQueryBuilder\";\nimport { MysqlTransaction } from \"../../Mysql/MysqlTransaction\";\nimport { PostgresTransaction } from \"../../Postgres/PostgresTransaction\";\nimport { PostgresQueryBuilder } from \"../../Postgres/PostgresQueryBuilder\";\n\nexport abstract class AbstractModelManager<T extends Model> {\n  protected logs: boolean;\n  protected model: new () => T;\n  protected modelInstance: T;\n  public tableName: string;\n\n  protected constructor(model: new () => T, logs: boolean) {\n    this.logs = logs;\n    this.model = model;\n    this.modelInstance = new this.model();\n    this.tableName = this.modelInstance.metadata.tableName;\n  }\n\n  public abstract find(input?: FindType): Promise<T[]>;\n\n  public abstract findOne(input: FindOneType): Promise<T | null>;\n\n  public abstract findOneById(id: string | number): Promise<T | null>;\n\n  public abstract save(model: T, trx?: MysqlTransaction | PostgresTransaction): Promise<T | null>;\n\n  public abstract update(\n    model: T,\n    trx?: MysqlTransaction | PostgresTransaction,\n  ): Promise<T | null>;\n\n  public abstract deleteByColumn(\n    column: string,\n    value: string | number | boolean,\n    trx?: MysqlTransaction | PostgresTransaction,\n  ): Promise<number> | Promise<number | null>;\n\n  public abstract delete(\n    model: T,\n    trx?: MysqlTransaction | PostgresTransaction,\n  ): Promise<T | null>;\n\n  public abstract createTransaction(): MysqlTransaction | PostgresTransaction;\n\n  public abstract queryBuilder():\n    | MysqlQueryBuilder<T>\n    | PostgresQueryBuilder<T>;\n}\n","/*\n * This class is used to make operations on models\n */\nimport { Model } from \"../Models/Model\";\nimport {\n  FindOneType,\n  FindType,\n} from \"../Models/ModelManager/ModelManagerTypes\";\nimport mysql, { Pool, RowDataPacket } from \"mysql2/promise\";\nimport selectTemplate from \"../Templates/Query/SELECT\";\nimport ModelManagerQueryUtils from \"./MySqlModelManagerUtils\";\nimport { log, queryError } from \"../../Logger\";\nimport { MysqlQueryBuilder } from \"./MysqlQueryBuilder\";\nimport MySqlModelManagerUtils from \"./MySqlModelManagerUtils\";\nimport { MysqlTransaction } from \"./MysqlTransaction\";\nimport { AbstractModelManager } from \"../Models/ModelManager/AbstractModelManager\";\nimport {modelFromSnakeCaseToCamel} from \"../../CaseUtils\";\n\nexport class MysqlModelManager<\n  T extends Model,\n> extends AbstractModelManager<T> {\n  protected mysqlPool: mysql.Pool;\n\n  /**\n   * Constructor for MysqlModelManager class.\n   *\n   * @param {new () => T} model - Model constructor.\n   * @param {Pool} mysqlConnection - MySQL connection pool.\n   * @param {boolean} logs - Flag to enable or disable logging.\n   */\n  constructor(model: new () => T, mysqlConnection: mysql.Pool, logs: boolean) {\n    super(model, logs);\n    this.mysqlPool = mysqlConnection;\n  }\n\n  /**\n   * Find method to retrieve multiple records from the database based on the input conditions.\n   *\n   * @param {FindType} input - Optional query parameters for filtering, ordering, and pagination.\n   * @returns Promise resolving to an array of models.\n   */\n  public async find(input?: FindType): Promise<T[]> {\n    try {\n      if (!input) {\n        const select = selectTemplate(this.tableName);\n        log(select.selectAll, this.logs);\n        const [rows] = await this.mysqlPool.query<RowDataPacket[]>(\n          select.selectAll,\n        );\n\n        const models = rows.map((row) => {\n          const model = row as T;\n          model.metadata = this.modelInstance.metadata;\n          return model;\n        }) || [];\n        return models.map((model) => modelFromSnakeCaseToCamel(model)) as T[] || [];\n      }\n\n      const query = ModelManagerQueryUtils.parseSelectQueryInput(\n        new this.model(),\n        input,\n      );\n      log(query, this.logs);\n\n      const [rows] = await this.mysqlPool.query<RowDataPacket[]>(query);\n      return Promise.all(\n        rows.map(async (row) => {\n          const model = new this.model();\n          const modelData = rows[0] as T;\n\n          // merge model data into model\n          Object.assign(model, modelData);\n\n          // relations parsing on the queried model\n          await MySqlModelManagerUtils.parseRelationInput(\n            model,\n            input,\n            this.mysqlPool,\n            this.logs,\n          );\n\n          return modelFromSnakeCaseToCamel(model) as T;\n        }),\n      );\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * Find a single record from the database based on the input conditions.\n   *\n   * @param {FindOneType} input - Query parameters for filtering and selecting a single record.\n   * @returns Promise resolving to a single model or null if not found.\n   */\n  public async findOne(input: FindOneType): Promise<T | null> {\n    const model = new this.model();\n    try {\n      const query = ModelManagerQueryUtils.parseSelectQueryInput(model, input);\n      log(query, this.logs);\n      const [rows] = await this.mysqlPool.query<RowDataPacket[]>(query);\n      const modelData = rows[0] as T;\n\n      // merge model data into model\n      Object.assign(model, modelData);\n\n      // relations parsing on the queried model\n      await MySqlModelManagerUtils.parseRelationInput(\n        model,\n        input,\n        this.mysqlPool,\n        this.logs,\n      );\n\n      return modelFromSnakeCaseToCamel(model);\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * Find a single record by its ID from the database.\n   *\n   * @param {string | number} id - ID of the record to retrieve.\n   * @returns Promise resolving to a single model or null if not found.\n   */\n  public async findOneById(id: string | number): Promise<T | null> {\n    const select = selectTemplate(this.tableName);\n    try {\n      const stringedId = typeof id === \"number\" ? id.toString() : id;\n      const query = select.selectById(stringedId);\n      log(query, this.logs);\n      const [rows] = await this.mysqlPool.query<RowDataPacket[]>(query);\n      const modelData = rows[0] as T;\n      return modelFromSnakeCaseToCamel(modelData) as T;\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * Save a new model instance to the database.\n   *\n   * @param {Model} model - Model instance to be saved.\n   * @param {MysqlTransaction} trx - MysqlTransaction to be used on the save operation.\n   * @returns Promise resolving to the saved model or null if saving fails.\n   */\n  public async save(model: T, trx?: MysqlTransaction): Promise<T | null> {\n    if (trx) {\n      return await trx.queryInsert<T>(\n        ModelManagerQueryUtils.parseInsert(model),\n        this.modelInstance.metadata,\n      );\n    }\n\n    try {\n      const insertQuery = ModelManagerQueryUtils.parseInsert(model);\n      log(insertQuery, this.logs);\n      const [result]: any = await this.mysqlPool.query<RowDataPacket[]>(insertQuery);\n      return await this.findOneById(result['insertId']);\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * Update an existing model instance in the database.\n   * @param {Model} model - Model instance to be updated.\n   * @param {MysqlTransaction} trx - MysqlTransaction to be used on the update operation.\n   * @returns Promise resolving to the updated model or null if updating fails.\n   */\n  public async update(model: T, trx?: MysqlTransaction): Promise<T | null> {\n    const primaryKeyValue = this.modelInstance.metadata.primaryKey;\n    if (trx) {\n      await trx.queryUpdate<T>(\n        ModelManagerQueryUtils.parseUpdate(model),\n      );\n\n      return await this.findOneById(model[primaryKeyValue as keyof T] as string | number);\n    }\n\n    try {\n      const updateQuery = ModelManagerQueryUtils.parseUpdate(model);\n      log(updateQuery, this.logs);\n      await this.mysqlPool.query<RowDataPacket[]>(updateQuery);\n\n      return await this.findOneById(model[primaryKeyValue as keyof T] as string | number);\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * @description Delete a record from the database from the given column and value.\n   *\n   * @param {string} column - Column to filter by.\n   * @param {string | number | boolean} value - Value to filter by.\n   * @param {MysqlTransaction} trx - MysqlTransaction to be used on the delete operation.\n   * @returns Promise resolving to affected rows count\n   */\n  public async deleteByColumn(\n    column: string,\n    value: string | number | boolean,\n    trx?: MysqlTransaction,\n  ): Promise<number> {\n    if (trx) {\n      return await trx.queryDelete(\n        ModelManagerQueryUtils.parseDelete(this.tableName, column, value),\n      );\n    }\n\n    try {\n      const deleteQuery = ModelManagerQueryUtils.parseDelete(\n        this.tableName,\n        column,\n        value,\n      );\n      log(deleteQuery, this.logs);\n      const [rows]: any =\n        await this.mysqlPool.query<RowDataPacket[]>(deleteQuery);\n      return rows.affectedRows;\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * @description Delete a record from the database from the given model.\n   *\n   * @param {Model} model - Model to delete.\n   * @param {MysqlTransaction} trx - MysqlTransaction to be used on the delete operation.\n   * @returns Promise resolving to the deleted model or null if deleting fails.\n   */\n  public async delete(model: T, trx?: MysqlTransaction): Promise<T | null> {\n    try {\n      if (!model.metadata.primaryKey) {\n        throw new Error(\n          \"Model \" +\n            model.metadata.tableName +\n            \" has no primary key to be deleted from, try deleteByColumn\",\n        );\n      }\n      const deleteQuery = ModelManagerQueryUtils.parseDelete(\n        this.tableName,\n        model.metadata.primaryKey,\n        model[model.metadata.primaryKey as keyof T] as string,\n      );\n\n      if (trx) {\n        await trx.queryDelete(deleteQuery);\n        return model;\n      }\n\n      log(deleteQuery, this.logs);\n      await this.mysqlPool.query<RowDataPacket[]>(deleteQuery);\n      return model;\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * @description Creates a new transaction.\n   * @returns {MysqlTransaction} - Instance of MysqlTransaction.\n   */\n  public createTransaction(): MysqlTransaction {\n    return new MysqlTransaction(this.mysqlPool, this.tableName, this.logs);\n  }\n\n  /**\n   * Create and return a new instance of the MysqlQueryBuilder for building more complex SQL queries.\n   *\n   * @returns {MysqlQueryBuilder<Model>} - Instance of MysqlQueryBuilder.\n   */\n  public queryBuilder(): MysqlQueryBuilder<T> {\n    return new MysqlQueryBuilder<T>(\n      this.model,\n      this.tableName,\n      this.mysqlPool,\n      this.logs,\n    );\n  }\n}\n","import {\n  FindType,\n  FindOneType,\n} from \"../Models/ModelManager/ModelManagerTypes\";\nimport selectTemplate from \"../Templates/Query/SELECT\";\nimport { Model } from \"../Models/Model\";\nimport insertTemplate from \"../Templates/Query/INSERT\";\nimport updateTemplate from \"../Templates/Query/UPDATE\";\nimport deleteTemplate from \"../Templates/Query/DELETE\";\nimport { Relation } from \"../Models/Relations/Relation\";\nimport { log, queryError } from \"../../Logger\";\nimport relationTemplates from \"../Templates/Query/RELATIONS\";\nimport { Pool, QueryResult, QueryResultRow } from \"pg\";\nimport whereTemplate from \"../Templates/Query/WHERE.TS\";\n\nclass PostgresModelManagerUtils<T extends Model> {\n  public parseSelectQueryInput(\n    model: T,\n    input: FindType | FindOneType,\n  ): string {\n    let query = \"\";\n    query += this.parseSelect(model.metadata.tableName, input);\n    query += this.parseWhere(model.metadata.tableName, input);\n    query += this.parseQueryFooter(model.metadata.tableName, input);\n\n    return query;\n  }\n\n  private parseSelect(\n    tableName: string,\n    input: FindType | FindOneType,\n  ): string {\n    const select = selectTemplate(tableName);\n    return input.select\n      ? select.selectColumns(...input.select)\n      : select.selectAll;\n  }\n\n  private parseWhere(tableName: string, input: FindType | FindOneType): string {\n    const where = whereTemplate(tableName);\n    if (!input.where) {\n      return \"\";\n    }\n\n    let query = \"\";\n    const entries = Object.entries(input.where);\n    for (let index = 0; index < entries.length; index++) {\n      const [key, value] = entries[index];\n\n      if (index === 0) {\n        query += where.where(key, value);\n        continue;\n      }\n      query += where.andWhere(key, value);\n    }\n\n    return query;\n  }\n\n  private parseQueryFooter(\n    tableName: string,\n    input: FindType | FindOneType,\n  ): string {\n    if (!this.isFindType(input)) {\n      return \"\";\n    }\n\n    const select = selectTemplate(tableName);\n    let query = \"\";\n    if (input.offset) {\n      query += select.offset(input.offset);\n    }\n\n    if (input.groupBy) {\n      query += select.groupBy(...input.groupBy);\n    }\n\n    if (input.orderBy) {\n      query += select.orderBy([...input.orderBy.columns], input.orderBy.type);\n    }\n\n    if (input.limit) {\n      query += select.limit(input.limit);\n    }\n\n    return query;\n  }\n\n  public parseInsert(model: T): string {\n    const filteredModel = this.filterRelationsAndMetadata(model);\n    const keys = Object.keys(filteredModel);\n    const values = Object.values(filteredModel);\n    const insert = insertTemplate(model.metadata.tableName);\n\n    return insert.insert(keys, values);\n  }\n\n  public parseUpdate(model: T, modelName?: string): string {\n    const update = updateTemplate(modelName || model.metadata.tableName);\n    const filteredModel = this.filterRelationsAndMetadata(model);\n    const keys = Object.keys(filteredModel);\n    const values = Object.values(filteredModel);\n\n    const primaryKey = model.metadata.primaryKey as string;\n    const primaryKeyValue = model[primaryKey as keyof T];\n\n    return update.update(keys, values, primaryKey, primaryKeyValue as string);\n  }\n\n  private filterRelationsAndMetadata(model: T): T {\n    const filteredModel = {};\n\n    const keys = Object.keys(model);\n    for (const key of keys) {\n      if (key === \"metadata\") {\n        continue;\n      }\n\n      if (\n        typeof model[key as keyof T] === \"object\" &&\n        (model[key as keyof T] !== null ||\n          !Array.isArray(model[key as keyof T]))\n      ) {\n        continue;\n      }\n\n      Object.assign(filteredModel, { [key]: model[key as keyof T] });\n    }\n\n    return filteredModel as T;\n  }\n\n  public parseDelete(\n    tableName: string,\n    column: string,\n    value: string | number | boolean,\n  ): string {\n    return deleteTemplate(tableName).delete(column, value.toString());\n  }\n\n  private isFindType(input: FindType | FindOneType): input is FindType {\n    const instance = input as FindType;\n    return (\n      instance.hasOwnProperty(\"offset\") ||\n      instance.hasOwnProperty(\"groupBy\") ||\n      instance.hasOwnProperty(\"orderBy\") ||\n      instance.hasOwnProperty(\"limit\")\n    );\n  }\n\n  private getRelationFromModel(model: T, relationField: string): Relation {\n    const relation = model[relationField as keyof T] as Relation;\n    if (!relation) {\n      throw new Error(\n        \"Relation \" +\n          relationField +\n          \" not found in model \" +\n          model.metadata.tableName,\n      );\n    }\n\n    return relation;\n  }\n\n  // Parses and fills input relations directly into the model\n  public async parseRelationInput(\n    model: T,\n    input: FindOneType,\n    pgPool: Pool,\n    logs: boolean,\n  ): Promise<void> {\n    if (!input.relations) {\n      return;\n    }\n\n    if (!model.metadata.primaryKey) {\n      throw new Error(\"Model does not have a primary key\");\n    }\n\n    try {\n      const relationPromises = input.relations.map(\n        async (inputRelation: string) => {\n          const relation = this.getRelationFromModel(model, inputRelation);\n          const relationQuery = relationTemplates(model, relation);\n          console.log(relationQuery);\n\n          const { rows }: QueryResult<QueryResultRow> =\n            await pgPool.query(relationQuery);\n          if (rows.length === 0) {\n            Object.assign(model, { [inputRelation as keyof T]: null });\n            log(relationQuery, logs);\n            return;\n          }\n\n          if (rows.length === 1) {\n            Object.assign(model, {\n              [inputRelation as keyof T]: rows[0],\n            });\n            log(relationQuery, logs);\n            return;\n          }\n\n          Object.assign(model, { [inputRelation as keyof T]: rows });\n          log(relationQuery, logs);\n        },\n      );\n\n      await Promise.all(relationPromises);\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Failed to parse relations \" + error);\n    }\n  }\n\n  // Parses and fills input relations directly into the model\n  public async parseQueryBuilderRelations(\n    model: T,\n    input: string[],\n    pgPool: Pool,\n    logs: boolean,\n  ): Promise<void> {\n    if (input.length === 0) {\n      return;\n    }\n\n    if (!model.metadata.primaryKey) {\n      throw new Error(\"Model does not have a primary key\");\n    }\n\n    let relationQuery: string = \"\";\n    try {\n      const relationPromises = input.map(async (inputRelation: string) => {\n        const relation = this.getRelationFromModel(model, inputRelation);\n        relationQuery = relationTemplates(model, relation);\n\n        const { rows }: QueryResult<QueryResultRow> =\n          await pgPool.query(relationQuery);\n        if (rows.length === 0) {\n          Object.assign(model, { [inputRelation as keyof T]: null });\n          log(relationQuery, logs);\n          return;\n        }\n\n        if (rows.length === 1) {\n          Object.assign(model, {\n            [inputRelation as keyof T]: rows[0],\n          });\n          log(relationQuery, logs);\n          return;\n        }\n\n        Object.assign(model, { [inputRelation as keyof T]: rows });\n        log(relationQuery, logs);\n      });\n\n      await Promise.all(relationPromises);\n    } catch (error) {\n      queryError(\"Query Error: \" + relationQuery + error);\n      throw new Error(\"Failed to parse relations \" + error);\n    }\n  }\n}\n\nexport default new PostgresModelManagerUtils();\n","import { Pool, QueryResult, PoolClient } from \"pg\";\nimport { BEGIN_TRANSACTION } from \"../Templates/Query/TRANSACTION\";\nimport { COMMIT_TRANSACTION } from \"../Templates/Query/TRANSACTION\";\nimport { ROLLBACK_TRANSACTION } from \"../Templates/Query/TRANSACTION\";\nimport { log, queryError } from \"../../Logger\";\nimport { Metadata, Model } from \"../Models/Model\";\nimport selectTemplate from \"../Templates/Query/SELECT\";\n\nexport class PostgresTransaction {\n  protected tableName: string;\n  protected pgPool: Pool;\n  protected pgClient!: PoolClient;\n  protected logs: boolean;\n\n  constructor(pgPool: Pool, tableName: string, logs: boolean) {\n    this.logs = logs;\n    this.pgPool = pgPool;\n    this.tableName = tableName;\n  }\n\n  public async queryInsert<T extends Model>(\n    query: string,\n    metadata: Metadata,\n    params?: any[],\n  ): Promise<T> {\n    if (!this.pgClient) {\n      throw new Error(\"PostgresTransaction not started.\");\n    }\n\n    try {\n      log(query, this.logs);\n      const { rows }: QueryResult<T> = await this.pgClient.query<T>(\n        query,\n        params,\n      );\n\n      const insertId = rows[0][metadata.primaryKey as keyof T];\n      const select = selectTemplate(this.tableName).selectById(\n        insertId as string,\n      );\n      const { rows: savedModel } = await this.pgClient.query<T>(select);\n      return savedModel[0];\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Failed to execute insert query in transaction \" + error);\n    }\n  }\n\n  public async queryUpdate<T extends Model>(\n    query: string,\n    params?: any[],\n  ): Promise<number | null> {\n    if (!this.pgClient) {\n      throw new Error(\"PostgresTransaction not started.\");\n    }\n\n    try {\n      log(query, this.logs);\n      const { rowCount }: QueryResult = await this.pgClient.query(\n        query,\n        params,\n      );\n      return rowCount;\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Failed to execute update query in transaction \" + error);\n    }\n  }\n\n  public async queryDelete(\n    query: string,\n    params?: any[],\n  ): Promise<number | null> {\n    if (!this.pgClient) {\n      throw new Error(\"PostgresTransaction not started.\");\n    }\n\n    try {\n      log(query, this.logs);\n      const { rowCount }: QueryResult = await this.pgClient.query(\n        query,\n        params,\n      );\n      return rowCount;\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Failed to execute delete query in transaction \" + error);\n    }\n  }\n\n  /**\n   * Start transaction.\n   */\n  async start(): Promise<void> {\n    try {\n      this.pgClient = await this.pgPool.connect();\n      await this.pgClient.query(BEGIN_TRANSACTION);\n      log(BEGIN_TRANSACTION, this.logs);\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Failed to start transaction \" + error);\n    }\n  }\n\n  /**\n   * Commit transaction.\n   */\n  async commit(): Promise<void> {\n    if (!this.pgClient) {\n      throw new Error(\"PostgresTransaction not started.\");\n    }\n\n    try {\n      log(COMMIT_TRANSACTION, this.logs);\n      await this.pgClient.query(COMMIT_TRANSACTION);\n      this.pgClient.release();\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Failed to commit transaction \" + error);\n    }\n  }\n\n  /**\n   * Rollback transaction.\n   */\n  async rollback(): Promise<void> {\n    if (!this.pgClient) {\n      return;\n    }\n\n    try {\n      log(ROLLBACK_TRANSACTION, this.logs);\n      await this.pgClient.query(ROLLBACK_TRANSACTION);\n      this.pgClient.release();\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Failed to rollback transaction \" + error);\n    }\n  }\n}\n","import { Model } from \"../Models/Model\";\nimport { QueryBuilder } from \"../QueryBuilder/QueryBuilder\";\nimport {Pool, QueryResult} from \"pg\";\nimport whereTemplate, { WhereOperatorType } from \"../Templates/Query/WHERE.TS\";\nimport selectTemplate from \"../Templates/Query/SELECT\";\nimport { log } from \"../../Logger\";\nimport PostgresModelManagerUtils from \"./PostgresModelManagerUtils\";\n\nexport class PostgresQueryBuilder<T extends Model> extends QueryBuilder<T> {\n  protected pgPool: Pool;\n\n  public constructor(\n    model: new () => T,\n    tableName: string,\n    pgPool: Pool,\n    logs: boolean,\n  ) {\n    super(model, tableName, logs);\n    this.pgPool = pgPool;\n  }\n\n  public async one(): Promise<T | null> {\n    let query = this.selectQuery;\n    if (this.whereQuery) {\n      query += this.whereQuery;\n    }\n\n    log(query, this.logs);\n    const model = new this.model();\n    try {\n      const { rows }: { rows: QueryResult<T>[] } = await this.pgPool.query(query);\n      const modelData = rows[0] as unknown as T;\n\n      // merge model data into model\n      Object.assign(model, modelData);\n\n      // relations parsing on the queried model\n      await PostgresModelManagerUtils.parseQueryBuilderRelations(\n        model,\n        this.relations,\n        this.pgPool,\n        this.logs,\n      );\n\n      return model as T;\n    } catch (error) {\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  public async many(): Promise<T[]> {\n    let query = this.selectQuery;\n    if (this.whereQuery) {\n      query += this.whereQuery;\n    }\n\n    query += this.groupFooterQuery();\n\n    log(query, this.logs);\n    const model = new this.model();\n    try {\n      const { rows }: { rows: QueryResult<T>[] } = await this.pgPool.query(query);\n      return Promise.all(\n        rows.map(async (row) => {\n          const modelData = row as unknown as T;\n\n          // merge model data into model\n          Object.assign(model, modelData);\n\n          // relations parsing on the queried model\n          await PostgresModelManagerUtils.parseQueryBuilderRelations(\n            model,\n            this.relations,\n            this.pgPool,\n            this.logs,\n          );\n\n          return model as T;\n        }),\n      );\n    } catch (error) {\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  public select(...columns: string[]): PostgresQueryBuilder<T> {\n    const select = selectTemplate(this.tableName);\n    this.selectQuery = select.selectColumns(...columns);\n    return this;\n  }\n\n  public addRelations(relations: string[]): PostgresQueryBuilder<T> {\n    this.relations = relations;\n    return this;\n  }\n\n  public where(\n    column: string,\n    operator: WhereOperatorType,\n    value: string | number | boolean | Date,\n  ): PostgresQueryBuilder<T> {\n    if (this.whereQuery) {\n      this.whereQuery += this.whereTemplate.andWhere(\n        column,\n        value.toString(),\n        operator,\n      );\n      return this;\n    }\n    this.whereQuery = this.whereTemplate.where(\n      column,\n      value.toString(),\n      operator,\n    );\n    return this;\n  }\n\n  public andWhere(\n    column: string,\n    operator: WhereOperatorType,\n    value: string | number | boolean | Date,\n  ): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.where(\n        column,\n        value.toString(),\n        operator,\n      );\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).andWhere(\n      column,\n      value.toString(),\n      operator,\n    );\n    return this;\n  }\n\n  public andWhereBetween(\n    column: string,\n    min: string,\n    max: string,\n  ): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereBetween(column, min, max);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).andWhereBetween(\n      column,\n      min,\n      max,\n    );\n    return this;\n  }\n\n  public andWhereIn(column: string, values: string[]): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereIn(column, values);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).andWhereIn(column, values);\n    return this;\n  }\n\n  public andWhereNotNull(column: string): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereNotNull(column);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).andWhereNotNull(column);\n    return this;\n  }\n\n  public andWhereNull(column: string): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereNull(column);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).andWhereNull(column);\n    return this;\n  }\n\n  public groupBy(columns: string): PostgresQueryBuilder<T> {\n    this.groupByQuery = this.selectTemplate.groupBy(...columns);\n    return this;\n  }\n\n  public limit(limit: number): PostgresQueryBuilder<T> {\n    this.limitQuery = this.selectTemplate.limit(limit);\n    return this;\n  }\n\n  public offset(offset: number): PostgresQueryBuilder<T> {\n    this.offsetQuery = this.selectTemplate.offset(offset);\n    return this;\n  }\n\n  public orWhere(\n    column: string,\n    operator: WhereOperatorType,\n    value: string | number | boolean | Date,\n  ): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.where(\n        column,\n        value.toString(),\n        operator,\n      );\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhere(\n      column,\n      value.toString(),\n      operator,\n    );\n    return this;\n  }\n\n  public orWhereBetween(\n    column: string,\n    min: string,\n    max: string,\n  ): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereBetween(column, min, max);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhereBetween(\n      column,\n      min,\n      max,\n    );\n    return this;\n  }\n\n  public orWhereIn(column: string, values: string[]): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereIn(column, values);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhereIn(column, values);\n    return this;\n  }\n\n  public orWhereNotBetween(\n    column: string,\n    min: string,\n    max: string,\n  ): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereNotBetween(column, min, max);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhereNotBetween(\n      column,\n      min,\n      max,\n    );\n    return this;\n  }\n\n  public orWhereNotIn(\n    column: string,\n    values: string[],\n  ): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereNotIn(column, values);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhereNotIn(\n      column,\n      values,\n    );\n    return this;\n  }\n\n  public orWhereNotNull(column: string): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereNotNull(column);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhereNotNull(column);\n    return this;\n  }\n\n  public orWhereNull(column: string): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereNull(column);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).orWhereNull(column);\n    return this;\n  }\n\n  public orderBy(\n    column: string[],\n    order: \"ASC\" | \"DESC\",\n  ): PostgresQueryBuilder<T> {\n    this.orderByQuery = this.selectTemplate.orderBy(column, order);\n    return this;\n  }\n\n  public rawAndWhere(query: string): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.rawWhere(query);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).rawAndWhere(query);\n    return this;\n  }\n\n  public rawOrWhere(query: string): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.rawWhere(query);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).rawOrWhere(query);\n    return this;\n  }\n\n  public rawWhere(query: string): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.rawAndWhere(query);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).rawWhere(query);\n    return this;\n  }\n\n  public whereBetween(\n    column: string,\n    min: string,\n    max: string,\n  ): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereBetween(column, min, max);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).whereBetween(\n      column,\n      min,\n      max,\n    );\n    return this;\n  }\n\n  public whereIn(column: string, values: string[]): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.whereIn(column, values);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).whereIn(column, values);\n    return this;\n  }\n\n  public whereNotBetween(\n    column: string,\n    min: string,\n    max: string,\n  ): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.andWhereNotBetween(column, min, max);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).whereNotBetween(\n      column,\n      min,\n      max,\n    );\n    return this;\n  }\n\n  public whereNotIn(column: string, values: string[]): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.andWhereNotIn(column, values);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).whereNotIn(column, values);\n    return this;\n  }\n\n  public whereNotNull(column: string): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.andWhereNotNull(column);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).whereNotNull(column);\n    return this;\n  }\n\n  public whereNull(column: string): PostgresQueryBuilder<T> {\n    if (!this.whereQuery) {\n      this.whereQuery = this.whereTemplate.andWhereNull(column);\n      return this;\n    }\n    this.whereQuery += whereTemplate(this.tableName).whereNull(column);\n    return this;\n  }\n}\n","/*\n * This class is used to make operations on models\n */\nimport { Model } from \"../Models/Model\";\nimport {\n  FindOneType,\n  FindType,\n} from \"../Models/ModelManager/ModelManagerTypes\";\nimport pg, {  QueryResult } from \"pg\";\nimport selectTemplate from \"../Templates/Query/SELECT\";\nimport ModelManagerQueryUtils from \"../Mysql/MySqlModelManagerUtils\";\nimport { log, queryError } from \"../../Logger\";\nimport PostgresModelManagerUtils from \"./PostgresModelManagerUtils\";\nimport { MysqlTransaction } from \"../Mysql/MysqlTransaction\";\nimport { AbstractModelManager } from \"../Models/ModelManager/AbstractModelManager\";\nimport { PostgresTransaction } from \"./PostgresTransaction\";\nimport { PostgresQueryBuilder } from \"./PostgresQueryBuilder\";\nimport {modelFromSnakeCaseToCamel} from \"../../CaseUtils\";\n\nexport class PostgresModelManager<\n  T extends Model,\n> extends AbstractModelManager<T> {\n  protected pgPool: pg.Pool;\n\n  /**\n   * Constructor for PostgresModelManager class.\n   *\n   * @param {new () => T} model - Model constructor.\n   * @param {Pool} pgConnection - PostgreSQL connection pool.\n   * @param {boolean} logs - Flag to enable or disable logging.\n   */\n  constructor(model: new () => T, pgConnection: pg.Pool, logs: boolean) {\n    super(model, logs);\n    this.pgPool = pgConnection;\n  }\n\n  /**\n   * Find method to retrieve multiple records from the database based on the input conditions.\n   *\n   * @param {FindType} input - Optional query parameters for filtering, ordering, and pagination.\n   * @returns Promise resolving to an array of models.\n   */\n  public async find(input?: FindType): Promise<T[]> {\n    try {\n      if (!input) {\n        const select = selectTemplate(this.tableName);\n        log(select.selectAll, this.logs);\n        const { rows }: QueryResult<T> = await this.pgPool.query(select.selectAll);\n\n        const models = rows.map((row) => {\n          const model = row as T;\n          model.metadata = this.modelInstance.metadata;\n          return model;\n        }) || [];\n        return models.map((model) => modelFromSnakeCaseToCamel(model)) as T[] || [];\n      }\n\n      const query = ModelManagerQueryUtils.parseSelectQueryInput(\n          new this.model(),\n          input,\n      );\n      log(query, this.logs);\n\n      const { rows }: QueryResult<T> = await this.pgPool.query(query);\n      return Promise.all(\n          rows.map(async (row) => {\n            const model = new this.model();\n            const modelData = row as T;\n\n            // merge model data into model\n            Object.assign(model, modelData);\n\n            // relations parsing on the queried model\n            await PostgresModelManagerUtils.parseRelationInput(\n                model,\n                input,\n                this.pgPool,\n                this.logs,\n            );\n\n            return modelFromSnakeCaseToCamel(model) as T;\n          }),\n      );\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * Find a single record from the database based on the input conditions.\n   *\n   * @param {FindOneType} input - Query parameters for filtering and selecting a single record.\n   * @returns Promise resolving to a single model or null if not found.\n   */\n  public async findOne(input: FindOneType): Promise<T | null> {\n    const model = new this.model();\n    try {\n      const query = ModelManagerQueryUtils.parseSelectQueryInput(model, input);\n      log(query, this.logs);\n\n      const { rows } = await this.pgPool.query(query);\n      const modelData = rows[0] as T;\n\n      if (!modelData) {\n        return null;\n      }\n\n      Object.assign(model, modelData);\n\n      await PostgresModelManagerUtils.parseRelationInput(\n          model,\n          input,\n          this.pgPool,\n          this.logs,\n      );\n\n      return modelFromSnakeCaseToCamel(model);\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * Find a single record by its ID from the database.\n   *\n   * @param {string | number} id - ID of the record to retrieve.\n   * @returns Promise resolving to a single model or null if not found.\n   */\n  public async findOneById(id: string | number): Promise<T | null> {\n    const select = selectTemplate(this.tableName);\n    try {\n      const stringedId = typeof id === \"number\" ? id.toString() : id;\n      const query = select.selectById(stringedId);\n      log(query, this.logs);\n\n      const { rows } = await this.pgPool.query(query);\n      const modelData = rows[0] as T;\n\n      if (!modelData) {\n        return null;\n      }\n\n      return modelFromSnakeCaseToCamel(modelData);\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n  /**\n   * Save a new model instance to the database.\n   *\n   * @param {Model} model - Model instance to be saved.\n   * @param {MysqlTransaction} trx - MysqlTransaction to be used on the save operation.\n   * @returns Promise resolving to the saved model or null if saving fails.\n   */\n  public async save(model: T, trx?: PostgresTransaction): Promise<T | null> {\n    if (trx) {\n      return await trx.queryInsert<T>(\n          ModelManagerQueryUtils.parseInsert(model),\n          this.modelInstance.metadata,\n      );\n    }\n\n    try {\n      const insertQuery = ModelManagerQueryUtils.parseInsert(model) + ' RETURNING *';\n      log(insertQuery, this.logs);\n      const { rows } = await this.pgPool.query(insertQuery);\n      const insertedModel = rows[0] as T;\n\n      if (!insertedModel) {\n        return null;\n      }\n\n      return modelFromSnakeCaseToCamel(insertedModel);\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * Update an existing model instance in the database.\n   * @param {Model} model - Model instance to be updated.\n   * @param {PostgresTransaction} trx - PostgresTransaction to be used on the update operation.\n   * @returns Promise resolving to the updated model or null if updating fails.\n   */\n  public async update(model: T, trx?: PostgresTransaction): Promise<T | null> {\n    const primaryKeyValue = this.modelInstance.metadata.primaryKey;\n    if (trx) {\n      await trx.queryUpdate<T>(\n          ModelManagerQueryUtils.parseUpdate(model),\n      );\n\n      return await this.findOneById(model[primaryKeyValue as keyof T] as string | number);\n    }\n\n    try {\n      const updateQuery = ModelManagerQueryUtils.parseUpdate(model);\n      log(updateQuery, this.logs);\n      await this.pgPool.query(updateQuery);\n\n      return await this.findOneById(model[primaryKeyValue as keyof T] as string | number);\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * @description Delete a record from the database from the given column and value.\n   *\n   * @param {string} column - Column to filter by.\n   * @param {string | number | boolean} value - Value to filter by.\n   * @param {PostgresTransaction} trx - PostgresTransaction to be used on the delete operation.\n   * @returns Promise resolving to affected rows count\n   */\n  public async deleteByColumn(\n      column: string,\n      value: string | number | boolean,\n      trx?: PostgresTransaction,\n  ): Promise<number> {\n    if (trx) {\n      return await trx.queryDelete(\n          ModelManagerQueryUtils.parseDelete(this.tableName, column, value),\n      ) || 0;\n    }\n\n    try {\n      const deleteQuery = ModelManagerQueryUtils.parseDelete(\n          this.tableName,\n          column,\n          value,\n      );\n      log(deleteQuery, this.logs);\n      const result = await this.pgPool.query(deleteQuery);\n      return result.rowCount || 0;\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * @description Delete a record from the database from the given model.\n   *\n   * @param {Model} model - Model to delete.\n   * @param {PostgresTransaction} trx - PostgresTransaction to be used on the delete operation.\n   * @returns Promise resolving to the deleted model or null if deleting fails.\n   */\n  public async delete(model: T, trx?: PostgresTransaction): Promise<T | null> {\n    try {\n      if (!model.metadata.primaryKey) {\n        throw new Error(\n            \"Model \" +\n            model.metadata.tableName +\n            \" has no primary key to be deleted from, try deleteByColumn\",\n        );\n      }\n      const deleteQuery = ModelManagerQueryUtils.parseDelete(\n          this.tableName,\n          model.metadata.primaryKey,\n          model[model.metadata.primaryKey as keyof T] as string,\n      );\n\n      if (trx) {\n        await trx.queryDelete(deleteQuery);\n        return model;\n      }\n\n      log(deleteQuery, this.logs);\n      await this.pgPool.query(deleteQuery);\n      return model;\n    } catch (error) {\n      queryError(error);\n      throw new Error(\"Query failed \" + error);\n    }\n  }\n\n  /**\n   * @description Creates a new transaction.\n   * @returns {MysqlTransaction} - Instance of MysqlTransaction.\n   */\n  public createTransaction(): PostgresTransaction {\n    return new PostgresTransaction(this.pgPool, this.tableName, this.logs);\n  }\n\n  /**\n   * Create and return a new instance of the MysqlQueryBuilder for building more complex SQL queries.\n   *\n   * @returns {MysqlQueryBuilder<Model>} - Instance of MysqlQueryBuilder.\n   */\n  public queryBuilder(): PostgresQueryBuilder<T> {\n    return new PostgresQueryBuilder<T>(\n      this.model,\n      this.tableName,\n      this.pgPool,\n      this.logs,\n    );\n  }\n}\n","import { ColumnConfig, ColumnType } from \"./ColumnTypes\";\n\nexport class Column {\n  public name!: string;\n  public oldName?: string; // used for alter table\n  public type!: ColumnType;\n  public values?: string[];\n  public length?: number;\n  public alter?: boolean; // used for alter table\n  public after?: string; // used for alter table\n  public config: ColumnConfig = {\n    nullable: true,\n    unique: false,\n    autoIncrement: false,\n    primary: false,\n    defaultValue: false,\n    autoCreate: false,\n    autoUpdate: false,\n    references: undefined,\n    unsigned: false,\n    cascade: false,\n  };\n\n  public getColumn(): Column {\n    return this;\n  }\n}\n","export class DropColumn {\n  public name: string;\n  public foreignKey: boolean;\n\n  constructor(name: string, foreignKey: boolean = false) {\n    this.name = name;\n    this.foreignKey = foreignKey;\n  }\n\n  public getColumn(): DropColumn {\n    return this;\n  }\n}\n","import { Column } from \"../Column\";\nimport { Table } from \"../../Table\";\nimport { MigrationType } from \"../../Migration\";\n\nexport class ColumnConfigBuilder {\n  protected column: Column;\n  protected table: Table;\n  protected migrationType: MigrationType;\n\n  constructor(column: Column, table: Table, migrationType: MigrationType) {\n    this.column = column;\n    this.table = table;\n    this.migrationType = migrationType;\n  }\n\n  public nullable(): ColumnConfigBuilder {\n    this.column.config.nullable = true;\n    return this;\n  }\n\n  public notNullable(): ColumnConfigBuilder {\n    this.column.config.nullable = false;\n    return this;\n  }\n\n  public unique(): ColumnConfigBuilder {\n    this.column.config.unique = true;\n    return this;\n  }\n\n  public autoIncrement(): ColumnConfigBuilder {\n    this.column.config.autoIncrement = true;\n    return this;\n  }\n\n  public primary(): ColumnConfigBuilder {\n    this.column.config.primary = true;\n    return this;\n  }\n\n  public cascade(): ColumnConfigBuilder {\n    this.column.config.cascade = true;\n    return this;\n  }\n\n  public defaultValue(value: string): ColumnConfigBuilder {\n    this.column.config.defaultValue = value;\n    return this;\n  }\n\n  public autoCreate(): ColumnConfigBuilder {\n    this.column.config.autoCreate = true;\n    return this;\n  }\n\n  public autoUpdate(): ColumnConfigBuilder {\n    this.column.config.autoUpdate = true;\n    return this;\n  }\n\n  public references(table: string, column: string): ColumnConfigBuilder {\n    this.column.config.references = {\n      table,\n      column,\n    };\n    return this;\n  }\n\n  public unsigned(): ColumnConfigBuilder {\n    this.column.config.unsigned = true;\n    return this;\n  }\n\n  public commit(): void {\n    switch (this.migrationType) {\n      case \"create\":\n        this.table.columnsToAdd.push(this.column);\n        break;\n      case \"alter\":\n        this.table.columnsToAlter.push(this.column);\n        break;\n    }\n  }\n\n  public alter(): ColumnConfigBuilder {\n    this.column.alter = true;\n    return this;\n  }\n\n  public after(columnName: string): ColumnConfigBuilder {\n    this.column.after = columnName;\n    return this;\n  }\n}\n","import { Column } from \"../Column\";\nimport { ColumnConfigBuilder } from \"./ColumnConfigBuilder\";\nimport { Table } from \"../../Table\";\nimport { MigrationType } from \"../../Migration\";\n\nexport class ColumnTypeBuilder {\n  protected column: Column;\n  protected table: Table;\n  protected migrationType: MigrationType;\n\n  constructor(column: Column, table: Table, migrationType: MigrationType) {\n    this.column = column;\n    this.table = table;\n    this.migrationType = migrationType;\n  }\n\n  public string(name: string, length: number = 100): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"VARCHAR\";\n    this.column.length = length;\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public text(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"TEXT\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public int(name: string, length: number = 100): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"INT\";\n    this.column.length = length;\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public bigInt(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"BIGINT\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public float(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"FLOAT\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public double(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"DOUBLE\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public decimal(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"DECIMAL\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public boolean(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"BOOLEAN\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public date(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"DATE\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public dateTime(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"DATETIME\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public time(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"TIME\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public timestamp(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"TIMESTAMP\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public bit(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"BIT\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public enum(name: string, values: string[]): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"ENUM\";\n    this.column.values = values;\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public set(name: string, values: string[]): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"SET\";\n    this.column.values = values;\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public uuid(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"UUID\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public char(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"CHAR\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public tinyText(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"TINYTEXT\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public mediumText(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"MEDIUMTEXT\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public longText(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"LONGTEXT\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public tinyInteger(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"TINYINT\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public smallInteger(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"SMALLINT\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public mediumInteger(name: string): ColumnConfigBuilder {\n    this.column.name = name;\n    this.column.type = \"MEDIUMINT\";\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public renameColumn(oldName: string, newName: string): ColumnConfigBuilder {\n    this.column.oldName = oldName;\n    this.column.name = newName;\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public commit(): void {\n    switch (this.migrationType) {\n      case \"create\":\n        this.table.columnsToAdd.push(this.column);\n        break;\n      case \"alter\":\n        this.table.columnsToAlter.push(this.column);\n        break;\n    }\n  }\n\n  public alter(): ColumnConfigBuilder {\n    this.column.alter = true;\n    return new ColumnConfigBuilder(this.column, this.table, this.migrationType);\n  }\n\n  public after(columnName: string): ColumnTypeBuilder {\n    this.column.after = columnName;\n    return this;\n  }\n}\n","import { Column } from \"./Columns/Column\";\nimport { DropColumn } from \"./Columns/DropColumn\";\nimport { ColumnTypeBuilder } from \"./Columns/ColumnBuilders/ColumnTypeBuilder\";\nimport { MigrationType } from \"./Migration\";\n\nexport class Table {\n  public tableName: string;\n  public columnsToAdd: Column[] = [];\n  public columnsToAlter: Column[] = [];\n  public columnsToDelete: DropColumn[] = [];\n  public dropTable: boolean = false;\n  public truncateTable: boolean = false;\n  public migrationType!: MigrationType;\n\n  constructor(tableName: string, migrationType: MigrationType) {\n    this.tableName = tableName;\n    this.migrationType = migrationType;\n  }\n\n  public column(): ColumnTypeBuilder {\n    const column = new Column();\n    return new ColumnTypeBuilder(column, this, this.migrationType);\n  }\n\n  public dropColumn(columnName: string, foreignKey?: boolean): void {\n    const column = new DropColumn(columnName, foreignKey);\n    this.columnsToDelete.push(column);\n  }\n\n  public drop(): void {\n    this.dropTable = true;\n  }\n\n  public truncate(): void {\n    this.truncateTable = true;\n  }\n}\n","import { Table } from \"./Table\";\nimport path from \"path\";\n\nexport type MigrationType =\n  | \"create\"\n  | \"alter\"\n  | \"rawQuery\"\n  | \"drop\"\n  | \"drop-force\";\n\nexport abstract class Migration {\n  public migrationName: string = path.basename(__filename);\n  public tableName!: string;\n  public migrationType!: MigrationType;\n  public table!: Table;\n  public rawQuery: string = \"\";\n\n  public abstract up(): void;\n  public abstract down(): void;\n\n  /**\n   * @description Use this method to manage a table in your database (create, alter, drop)\n   * @param tableName\n   * @param migrationType\n   */\n  public useTable(tableName: string, migrationType: MigrationType): void {\n    this.tableName = tableName;\n    this.migrationType = migrationType;\n    this.table = new Table(this.tableName, this.migrationType);\n  }\n\n  /**\n   * @description Use this method to run a raw query in your database\n   * @param query\n   */\n  public useRawQuery(query: string): void {\n    this.migrationType = \"rawQuery\";\n    this.rawQuery = query;\n  }\n}\n"],"mappings":"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","names":["column","winston","parseValue","mysql","rows","rows","pg","path"]}